# سیاست دسترسی CRM املاک

این سند مرجع ثابت پروژه برای دسترسی‌هاست.
هدف: امنیت بالا، جلوگیری از اختلاط نقش‌ها، و سادگی عملیات.

## 1) نقش‌ها

### Super Admin
- مالک نهایی سیستم.
- تنها نقش مجاز برای مدیریت ادمین‌ها و تنظیمات حساس.

### Admin (معمولی)
- اپراتور داخلی شرکت (محتوا، کاربران، مدیا، گزارش، عملیات پنل).
- دسترسی‌ها فقط از طریق Role به او داده می‌شود.
- حق مدیریت ادمین‌ها را ندارد.

### Consultant (مشاور)
- کاربر عملیاتی املاک.
- تمرکز روی فایل‌ها، آگهی‌ها، و پروفایل کاری خودش.
- نباید دسترسی پنل مدیریتی حساس داشته باشد.

## 2) قوانین طلایی

1. مدیریت ادمین‌ها فقط `Super Admin`:
- ایجاد/ویرایش/حذف ادمین
- تغییر نقش و سطح دسترسی ادمین
- فیلدهای حساس مشاور (مثل `is_verified`, `show_in_team`, `team_order`)

2. مسیر `me` فقط برای ویرایش پروفایل شخصی:
- تغییر اطلاعات شخصی مجاز
- تغییر دسترسی، نقش، تیم، و فعال/غیرفعال‌سازی حساب غیرمجاز

3. مشاور و ادمین یکسان نیستند:
- اگر کسی کار محتوایی/پشتیبانی/کاربری انجام می‌دهد، باید `Admin` باشد.
- اگر کسی فروش/اجاره و عملیات فایل انجام می‌دهد، باید `Consultant` باشد.

## 3) چه کسی را چه زمانی بسازیم؟

- مدیر مجموعه: `Super Admin`
- ادمین داخلی شرکت: `Admin`
- مشاور فروش/اجاره: `Consultant`

قاعده عملی:
- «نیاز به مدیریت ادمین‌ها دارد؟» فقط Super Admin
- «نیاز به ماژول‌های پنل دارد ولی نه مدیریت ادمین‌ها؟» Admin
- «نیاز به عملیات املاک خودش دارد؟» Consultant

## 4) تصمیم‌های قطعی این پروژه

- در این پروژه، مدیریت ادمین‌ها عمدا فقط برای `is_superuser=True` است.
- `is_admin_full` برای مسیرهای حساس مدیریت ادمین معیار کافی نیست.
- این تصمیم برای سناریوی CRM املاک تایید شده است.

## 5) چک‌لیست قبل از تحویل

1. مشاور در `me/edit`:
- نباید کارت نوع دسترسی ببیند.
- نباید بخش شبکه اجتماعی ادمین ببیند.
- نباید `is_active`، `is_verified`، `show_in_team`، `team_order` را تغییر دهد.

2. ادمین معمولی:
- نباید بتواند ادمین دیگر بسازد/حذف کند.
- نباید دسترسی ادمین‌ها را تغییر دهد.

3. فقط سوپر ادمین:
- همه عملیات مدیریت ادمین‌ها را انجام دهد.

---

نسخه: 1.0  
آخرین بروزرسانی: 2026-02-26
