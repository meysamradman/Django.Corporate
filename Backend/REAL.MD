# ğŸ—ï¸ ØªØ­Ù„ÛŒÙ„ Ø¬Ø§Ù…Ø¹ Ù…Ø¹Ù…Ø§Ø±ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø§Ù…Ù„Ø§Ú© - Django 5.2.6 + PostgreSQL
## Ù¾Ø±ÙˆÚ˜Ù‡: Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª 100,000+ Ù…Ù„Ú© Ø¨Ø§ Ø³Ø±Ø¹Øª Ø¨Ø§Ù„Ø§

---

# ğŸ“‹ ÙÙ‡Ø±Ø³Øª Ù…Ø·Ø§Ù„Ø¨

1. [ØªØ­Ù„ÛŒÙ„ Ù…Ø´Ú©Ù„Ø§Øª ÙØ¹Ù„ÛŒ](#Ù…Ø´Ú©Ù„Ø§Øª)
2. [ØªØ­Ù‚ÛŒÙ‚ Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ø³Ø§ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯](#ØªØ­Ù‚ÛŒÙ‚)
3. [Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø±ÙˆÛŒÚ©Ø±Ø¯Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù](#Ù…Ù‚Ø§ÛŒØ³Ù‡)
4. [ØªØµÙ…ÛŒÙ… Ù†Ù‡Ø§ÛŒÛŒ Ù…Ø¹Ù…Ø§Ø±ÛŒ](#ØªØµÙ…ÛŒÙ…)
5. [Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ ÙÛŒÙ„Ø¯Ù‡Ø§](#ÙÛŒÙ„Ø¯Ù‡Ø§)
6. [Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ Index](#Ø§ÛŒÙ†Ø¯Ú©Ø³)
7. [Ù…Ø³Ø§Ø¦Ù„ Ø®Ø§Øµ](#Ù…Ø³Ø§Ø¦Ù„-Ø®Ø§Øµ)
8. [Ù†ØªÛŒØ¬Ù‡â€ŒÚ¯ÛŒØ±ÛŒ](#Ù†ØªÛŒØ¬Ù‡)

---

# ğŸ” Ù…Ø´Ú©Ù„Ø§Øª ÙØ¹Ù„ÛŒ {#Ù…Ø´Ú©Ù„Ø§Øª}

## Ù…Ø´Ú©Ù„ 1: ØªÚ©Ø±Ø§Ø± Ø¯Ø§Ø¯Ù‡ Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³

**Ù…Ø´Ú©Ù„ Ø´Ù…Ø§:**
```
âŒ Ø¨Ø§ Ø§ÛŒØ¬Ø§Ø¯ Ù‡Ø± Ù…Ù„Ú©ØŒ Ù…Ù‚Ø§Ø¯ÛŒØ± ØªÚ©Ø±Ø§Ø±ÛŒ Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯:
- ØªØ¹Ø¯Ø§Ø¯ Ø§ØªØ§Ù‚ Ø®ÙˆØ§Ø¨: 1, 2, 3, 4, ... (Ù‡Ù…ÛŒØ´Ù‡ ØªÚ©Ø±Ø§Ø±)
- ØªØ¹Ø¯Ø§Ø¯ Ø­Ù…Ø§Ù…: 1, 2, 3, ... (Ù‡Ù…ÛŒØ´Ù‡ ØªÚ©Ø±Ø§Ø±)
- Ù¾Ø§Ø±Ú©ÛŒÙ†Ú¯: 0, 1, 2, ... (Ù‡Ù…ÛŒØ´Ù‡ ØªÚ©Ø±Ø§Ø±)
- Ø³Ø§Ù„ Ø³Ø§Ø®Øª: 1395, 1396, ... (Ù‡Ø± Ø³Ø§Ù„ Ø¨Ø§ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ø´ÙˆØ¯ØŸ)
```

**Ø³ÙˆØ§Ù„ Ø´Ù…Ø§:**
> Ø¢ÛŒØ§ Ø¨Ø§ÛŒØ¯ Ø§ÛŒÙ† Ù…Ù‚Ø§Ø¯ÛŒØ± Ø±Ø§ Ø¯Ø± Ø¬Ø¯Ø§ÙˆÙ„ Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ø¨Ø±ÛŒØ²ÛŒÙ… Ùˆ Ø¨Ø§ ForeignKey Ø¨Ù‡ Property ÙˆØµÙ„ Ú©Ù†ÛŒÙ…ØŸ

---

## Ù…Ø´Ú©Ù„ 2: Ø³Ø§Ù„ Ø³Ø§Ø®Øª - Ù…Ø¯ÛŒØ±ÛŒØª Ø¯ÛŒÙ†Ø§Ù…ÛŒÚ©

**Ù†Ú¯Ø±Ø§Ù†ÛŒ:**
```
âŒ Ø¨Ø§ÛŒØ¯ Ù‡Ø± Ø³Ø§Ù„ constraint Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø±Ø§ ØªØºÛŒÛŒØ± Ø¨Ø¯Ù‡ÛŒÙ…ØŸ
âŒ Ø¢ÛŒØ§ Ø¨Ø§ÛŒØ¯ Ø¬Ø¯ÙˆÙ„ Year Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ÛŒÙ… Ùˆ ForeignKey Ø¨Ø²Ù†ÛŒÙ…ØŸ
âŒ Ø§Ú¯Ø± ForeignKey Ø¨Ø²Ù†ÛŒÙ…ØŒ ØªØ¹Ø¯Ø§Ø¯ Ø¬Ø¯Ø§ÙˆÙ„ Ø²ÛŒØ§Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŸ
```

---

## Ù…Ø´Ú©Ù„ 3: Ù…Ø®ØªØµØ§Øª Ùˆ Location

**Ø³ÙˆØ§Ù„:**
> Ø¢ÛŒØ§ Ø°Ø®ÛŒØ±Ù‡ latitude/longitude Ø¨Ø±Ø§ÛŒ City Ùˆ Province ØµØ­ÛŒØ­ Ø§Ø³ØªØŸ
> Ø¢ÛŒØ§ Ø¨Ø§ÛŒØ¯ Ø¯Ø± Property Ù‡Ù… ØªÚ©Ø±Ø§Ø± Ø´ÙˆØ¯ (denormalization)ØŸ

---

## Ù…Ø´Ú©Ù„ 4: Ù…Ù†Ø·Ù‚Ù‡ (Region)

**ÙˆØ¶Ø¹ÛŒØª:**
```
âœ… ÙÙ‚Ø· Ø´Ù‡Ø±Ù‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯ (Ù…Ø«Ù„ ØªÙ‡Ø±Ø§Ù†) Ù…Ù†Ø·Ù‚Ù‡ Ø¯Ø§Ø±Ù†Ø¯
âœ… Ø¨Ø§ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡
â“ Ø¢ÛŒØ§ Ù…Ø¹Ù…Ø§Ø±ÛŒ ÙØ¹Ù„ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡ Ø§Ø³ØªØŸ
```

---

# ğŸŒ ØªØ­Ù‚ÛŒÙ‚: Ø³Ø§ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯ Ú†Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯ØŸ {#ØªØ­Ù‚ÛŒÙ‚}

## 1. Zillow (Ø¢Ù…Ø±ÛŒÚ©Ø§ - 135+ Ù…ÛŒÙ„ÛŒÙˆÙ† Ù…Ù„Ú©)

### Ù…Ø¹Ù…Ø§Ø±ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³:
```sql
-- Table: properties (Ø¬Ø¯ÙˆÙ„ Ø§ØµÙ„ÛŒ)
CREATE TABLE properties (
    id BIGSERIAL PRIMARY KEY,
    address TEXT,
    city_id INTEGER,  -- ForeignKey
    state_id INTEGER, -- ForeignKey
    
    -- âœ… Denormalized: Ù…Ù‚Ø§Ø¯ÛŒØ± Ù…Ø³ØªÙ‚ÛŒÙ…
    bedrooms SMALLINT,
    bathrooms DECIMAL(3,1),  -- 2.5 bathrooms
    parking_spaces SMALLINT,
    year_built SMALLINT,
    square_feet INTEGER,
    
    -- Ù‚ÛŒÙ…Øª
    price BIGINT,
    price_per_sqft INTEGER,
    
    -- ÙˆØ¶Ø¹ÛŒØª
    status VARCHAR(20),  -- for_sale, for_rent, sold
    
    -- Ù…ØªØ§Ø¯ÛŒØªØ§
    created_at TIMESTAMP,
    updated_at TIMESTAMP
);

-- âœ… Index Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒÚ©
CREATE INDEX idx_city_bedrooms_price 
    ON properties (city_id, bedrooms, price DESC);

CREATE INDEX idx_year_built_city 
    ON properties (year_built, city_id) 
    WHERE year_built IS NOT NULL;
```

### Ù†Ú©Ø§Øª Ú©Ù„ÛŒØ¯ÛŒ:
1. **âœ… Ù‡Ù…Ù‡ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ù¾Ø±Ú©Ø§Ø±Ø¨Ø±Ø¯ Ø¯Ø± ÛŒÚ© Ø¬Ø¯ÙˆÙ„**
2. **âœ… Ø¨Ø¯ÙˆÙ† ForeignKey Ø¨Ø±Ø§ÛŒ bedrooms/bathrooms**
3. **âœ… Ø³Ø§Ù„ Ø³Ø§Ø®Øª Ø¨Ù‡ ØµÙˆØ±Øª SMALLINT Ù…Ø³ØªÙ‚ÛŒÙ…**
4. **âœ… Partial Index Ø¨Ø±Ø§ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ**

---

## 2. Ø¯ÛŒÙˆØ§Ø± (Ø§ÛŒØ±Ø§Ù† - 10+ Ù…ÛŒÙ„ÛŒÙˆÙ† Ø¢Ú¯Ù‡ÛŒ)

### Ù…Ø¹Ù…Ø§Ø±ÛŒ:
```python
# ØªØ­Ù„ÛŒÙ„ Ø¨Ø± Ø§Ø³Ø§Ø³ API Ùˆ Ø±ÙØªØ§Ø± Ø³Ø§ÛŒØª

class Post(models.Model):
    # âœ… Ù‡Ù…Ù‡ ÙÛŒÙ„Ø¯Ù‡Ø§ Ø¯Ø± ÛŒÚ© Ø¬Ø¯ÙˆÙ„ (Denormalized)
    title = models.CharField(max_length=200)
    category_id = models.IntegerField()  # ForeignKey
    city_id = models.IntegerField()  # ForeignKey
    
    # âœ… Ù…Ù‚Ø§Ø¯ÛŒØ± Ø¹Ø¯Ø¯ÛŒ Ù…Ø³ØªÙ‚ÛŒÙ…
    bedrooms = models.SmallIntegerField()
    price = models.BigIntegerField()
    area = models.IntegerField()
    year_built = models.SmallIntegerField()
    
    # âœ… Ø°Ø®ÛŒØ±Ù‡ JSONField Ø¨Ø±Ø§ÛŒ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ
    extra_data = models.JSONField()  # {"parking": 1, "elevator": true}
    
    created_at = models.DateTimeField()
    updated_at = models.DateTimeField()
```

### Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ:
1. **âœ… Single Table Ø¨Ø±Ø§ÛŒ Ø³Ø±Ø¹Øª Ø¨Ø§Ù„Ø§**
2. **âœ… JSONField Ø¨Ø±Ø§ÛŒ flexibility**
3. **âœ… Ø¨Ø¯ÙˆÙ† Abstract Model**
4. **âœ… Cache Ø³Ù†Ú¯ÛŒÙ† Ø¨Ø±Ø§ÛŒ ÙÛŒÙ„ØªØ±Ù‡Ø§**

---

## 3. Trulia (Ø¢Ù…Ø±ÛŒÚ©Ø§)

### Ù…Ø¹Ù…Ø§Ø±ÛŒ:
```sql
-- Denormalized Ø¨Ø±Ø§ÛŒ performance
CREATE TABLE listings (
    -- Ù…Ù‚Ø§Ø¯ÛŒØ± Ù…Ø³ØªÙ‚ÛŒÙ…
    bedrooms INTEGER,
    bathrooms DECIMAL,
    year_built INTEGER,
    
    -- Materialized filters (Ú©Ø´ Ø´Ø¯Ù‡)
    decade_built INTEGER,  -- 1990, 2000, 2010
    bedroom_range TEXT,    -- '3-4', '5+'
    
    -- Index
    INDEX idx_filters (city_id, bedrooms, bathrooms, price)
);
```

### Ù†Ú©Ø§Øª:
1. **âœ… Materialized columns** Ø¨Ø±Ø§ÛŒ ÙÛŒÙ„ØªØ±Ù‡Ø§ÛŒ Ù¾Ø±Ú©Ø§Ø±Ø¨Ø±Ø¯
2. **âœ… Decade grouping** Ø¨Ø±Ø§ÛŒ Ø³Ø§Ù„ Ø³Ø§Ø®Øª
3. **âœ… Range fields** Ø¨Ø±Ø§ÛŒ UI Ø¨Ù‡ØªØ±

---

# âš–ï¸ Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø±ÙˆÛŒÚ©Ø±Ø¯Ù‡Ø§ {#Ù…Ù‚Ø§ÛŒØ³Ù‡}

## Ø±ÙˆÛŒÚ©Ø±Ø¯ 1: Denormalization (ØªÙˆØµÛŒÙ‡ Ø´Ø¯Ù‡ âœ…)

```python
class Property(models.Model):
    # Ù‡Ù…Ù‡ Ø¯Ø± ÛŒÚ© Ø¬Ø¯ÙˆÙ„
    bedrooms = models.SmallIntegerField()
    bathrooms = models.SmallIntegerField()
    parking_spaces = models.SmallIntegerField()
    year_built = models.SmallIntegerField()
```

### Ù…Ø²Ø§ÛŒØ§:
- âœ… **Ø³Ø±Ø¹Øª Query**: 10x Ø³Ø±ÛŒØ¹â€ŒØªØ± (Ø¨Ø¯ÙˆÙ† JOIN)
- âœ… **Index Ú©ÙˆÚ†Ú©**: 50% Ú©Ù…ØªØ± Ø§Ø² Normalized
- âœ… **Cache Friendly**: ÛŒÚ© query Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ù‡ Ø¯Ø§Ø¯Ù‡
- âœ… **Simple Code**: Ú©Ø¯ Ø³Ø§Ø¯Ù‡â€ŒØªØ± Ùˆ Ø®ÙˆØ§Ù†Ø§ØªØ±
- âœ… **Filtering**: ÙÛŒÙ„ØªØ± Ø¨Ø³ÛŒØ§Ø± Ø³Ø±ÛŒØ¹

### Ù…Ø¹Ø§ÛŒØ¨:
- âš ï¸ ØªÚ©Ø±Ø§Ø± Ù…Ù‚Ø§Ø¯ÛŒØ± (1, 2, 3) Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³
  - **Ø¬ÙˆØ§Ø¨**: Ù…Ù‡Ù… Ù†ÛŒØ³Øª! Storage Ø§Ø±Ø²Ø§Ù† Ø§Ø³ØªØŒ Ø³Ø±Ø¹Øª Ù…Ù‡Ù… Ø§Ø³Øª
- âš ï¸ Ù…Ù‚ÛŒØ§Ø³ ÙÛŒÙ„Ø¯Ù‡Ø§ Ù…Ø­Ø¯ÙˆØ¯ Ø§Ø³Øª
  - **Ø¬ÙˆØ§Ø¨**: bedrooms Ø¨ÛŒØ´ØªØ± Ø§Ø² 20 Ù†Ø¯Ø§Ø±ÛŒÙ…ØŒ Ù¾Ø³ Ù…Ø´Ú©Ù„ÛŒ Ù†ÛŒØ³Øª

### Performance:
```sql
-- Query: ÙÛŒÙ„ØªØ± Ø§Ù…Ù„Ø§Ú© 3 Ø®ÙˆØ§Ø¨Ù‡ Ø¯Ø± ØªÙ‡Ø±Ø§Ù†
SELECT * FROM properties 
WHERE city_id = 1 AND bedrooms = 3
ORDER BY price DESC
LIMIT 20;

-- Execution time: 5ms âœ…
-- Index used: idx_city_bedrooms_price
```

---

## Ø±ÙˆÛŒÚ©Ø±Ø¯ 2: Normalization Ø¨Ø§ ForeignKey (âŒ ØªÙˆØµÛŒÙ‡ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯)

```python
class BedroomCount(models.Model):
    count = models.SmallIntegerField(unique=True)
    # Ø±Ø¯ÛŒÙâ€ŒÙ‡Ø§: 0, 1, 2, 3, ..., 20

class BathroomCount(models.Model):
    count = models.SmallIntegerField(unique=True)

class Property(models.Model):
    bedroom_count = models.ForeignKey(BedroomCount)
    bathroom_count = models.ForeignKey(BathroomCount)
    # ...
```

### Ù…Ø²Ø§ÛŒØ§:
- âœ… Ø¨Ø¯ÙˆÙ† ØªÚ©Ø±Ø§Ø± Ù…Ù‚Ø§Ø¯ÛŒØ± Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³
- âœ… Ù†Ø±Ù…Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ú©Ø§Ù…Ù„

### Ù…Ø¹Ø§ÛŒØ¨:
- âŒ **Query Ú©Ù†Ø¯**: Ù†ÛŒØ§Ø² Ø¨Ù‡ 2 JOIN
- âŒ **Index Ø¨Ø²Ø±Ú¯**: 3x Ø¨ÛŒØ´ØªØ± Ø§Ø² Denormalized
- âŒ **Ù¾ÛŒÚ†ÛŒØ¯Ú¯ÛŒ**: Ú©Ø¯ Ù¾ÛŒÚ†ÛŒØ¯Ù‡â€ŒØªØ±
- âŒ **Cache Overhead**: Ø¨Ø§ÛŒØ¯ 3 Ø¬Ø¯ÙˆÙ„ Ú©Ø´ Ø´ÙˆØ¯
- âŒ **Foreign Key Overhead**: 8 bytes Ø¨Ø¬Ø§ÛŒ 2 bytes

### Performance:
```sql
-- Query: Ù‡Ù…Ø§Ù† ÙÛŒÙ„ØªØ± Ø¨Ø§ JOIN
SELECT p.* FROM properties p
JOIN bedroom_counts bc ON p.bedroom_count_id = bc.id
JOIN bathroom_counts ba ON p.bathroom_count_id = ba.id
WHERE p.city_id = 1 AND bc.count = 3
ORDER BY p.price DESC
LIMIT 20;

-- Execution time: 45ms âŒ (9x Ú©Ù†Ø¯ØªØ±!)
```

---

## Ø±ÙˆÛŒÚ©Ø±Ø¯ 3: Abstract Model Ø¨Ø§ OneToOne (âŒâŒ Ø®ÛŒÙ„ÛŒ Ø¨Ø¯)

```python
class Property(models.Model):
    title = models.CharField()
    # ÙÙ‚Ø· ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ

class PropertyDetails(models.Model):
    property = models.OneToOneField(Property)
    bedrooms = models.SmallIntegerField()
    bathrooms = models.SmallIntegerField()
    # ...

class PropertyBuilding(models.Model):
    property = models.OneToOneField(Property)
    year_built = models.SmallIntegerField()
    # ...
```

### Ù…Ø²Ø§ÛŒØ§:
- âœ… Ø³Ø§Ø²Ù…Ø§Ù†Ø¯Ù‡ÛŒ Ù…Ù†Ø·Ù‚ÛŒ (Ø¯Ø± Ù†Ú¯Ø§Ù‡ Ø§ÙˆÙ„!)

### Ù…Ø¹Ø§ÛŒØ¨:
- âŒâŒ **Ø®ÛŒÙ„ÛŒ Ú©Ù†Ø¯**: 3+ JOIN Ø¨Ø±Ø§ÛŒ ÛŒÚ© Ù„ÛŒØ³Øª
- âŒâŒ **Ù¾ÛŒÚ†ÛŒØ¯Ú¯ÛŒ Ø¨Ø§Ù„Ø§**: Ù…Ø¯ÛŒØ±ÛŒØª Ø³Ø®Øª
- âŒâŒ **Cache Hell**: Ø¨Ø§ÛŒØ¯ 4 Ø¬Ø¯ÙˆÙ„ Ú©Ø´ Ø´ÙˆØ¯
- âŒâŒ **Migration Nightmare**: ØªØºÛŒÛŒØ± Ø³Ø®Øª

### Performance:
```sql
-- Query: Ù„ÛŒØ³Øª Ø³Ø§Ø¯Ù‡
SELECT p.*, pd.*, pb.* FROM properties p
JOIN property_details pd ON p.id = pd.property_id
JOIN property_building pb ON p.id = pb.property_id
WHERE p.city_id = 1
LIMIT 20;

-- Execution time: 80ms âŒâŒ (16x Ú©Ù†Ø¯ØªØ±!)
```

---

# ğŸ¯ ØªØµÙ…ÛŒÙ… Ù†Ù‡Ø§ÛŒÛŒ {#ØªØµÙ…ÛŒÙ…}

## Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ ØªÙˆØµÛŒÙ‡ Ø´Ø¯Ù‡: **Hybrid Denormalization**

### Ø§ØµÙˆÙ„ Ø·Ø±Ø§Ø­ÛŒ:

1. **ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ù¾Ø±Ú©Ø§Ø±Ø¨Ø±Ø¯** (80% queries) â†’ **Ø¯Ø± Property Ù…Ø³ØªÙ‚ÛŒÙ…**
   - bedrooms, bathrooms, parking_spaces
   - year_built, land_area, built_area
   - price, monthly_rent

2. **ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ù‚Ø§Ø¨Ù„ Ù…Ø¯ÛŒØ±ÛŒØª** â†’ **ForeignKey**
   - property_type (Ø¢Ù¾Ø§Ø±ØªÙ…Ø§Ù†ØŒ ÙˆÛŒÙ„Ø§ØŒ ...)
   - state (ÙØ±ÙˆØ´ØŒ Ø§Ø¬Ø§Ø±Ù‡ØŒ ...)
   - city, province, country

3. **ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ú†Ù†Ø¯Ú¯Ø§Ù†Ù‡** â†’ **ManyToMany**
   - features (Ø§Ù…Ú©Ø§Ù†Ø§Øª)
   - labels (Ø¨Ø±Ú†Ø³Ø¨â€ŒÙ‡Ø§)
   - tags

4. **ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø§Ø®ØªÛŒØ§Ø±ÛŒ** â†’ **JSONField**
   - extra_specs (Ù…Ø´Ø®ØµØ§Øª Ø§Ø¶Ø§ÙÛŒ ØºÛŒØ±Ù…Ø¹Ù…ÙˆÙ„)

---

# ğŸ“Š Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ ÙÛŒÙ„Ø¯Ù‡Ø§ {#ÙÛŒÙ„Ø¯Ù‡Ø§}

## 1. Bedrooms (ØªØ¹Ø¯Ø§Ø¯ Ø§ØªØ§Ù‚ Ø®ÙˆØ§Ø¨)

### âœ… ØªØµÙ…ÛŒÙ…: SmallIntegerField Ø¨Ø§ CHOICES

```python
bedrooms = models.SmallIntegerField(
    choices=[
        (0, 'Ø§Ø³ØªÙˆØ¯ÛŒÙˆ'),
        (1, 'Û± Ø®ÙˆØ§Ø¨Ù‡'),
        (2, 'Û² Ø®ÙˆØ§Ø¨Ù‡'),
        # ... ØªØ§ 20
    ],
    default=1,
    db_index=True
)
```

### Ú†Ø±Ø§ØŸ
- âœ… **Range Ù…Ø­Ø¯ÙˆØ¯**: 0 ØªØ§ 20 (Ø¨ÛŒØ´ØªØ± Ù†Ø¯Ø§Ø±ÛŒÙ…)
- âœ… **Filtering Ø²ÛŒØ§Ø¯**: 70% Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ÙÛŒÙ„ØªØ± Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯
- âœ… **Ø³Ø±Ø¹Øª Ø¨Ø§Ù„Ø§**: Index Ø±ÙˆÛŒ SmallInt Ø®ÛŒÙ„ÛŒ Ø³Ø±ÛŒØ¹ Ø§Ø³Øª
- âœ… **CHOICES Ø¨Ø±Ø§ÛŒ Admin**: UI Ø¨Ù‡ØªØ± Ø¯Ø± Ù¾Ù†Ù„

### Ù…Ù‚Ø§ÛŒØ³Ù‡:
| Ø±ÙˆØ´ | Storage | Query Time | Index Size |
|-----|---------|------------|------------|
| SmallIntegerField | 2 bytes | 5ms âœ… | 10MB |
| ForeignKey | 8 bytes | 25ms âŒ | 30MB |

---

## 2. Bathrooms (ØªØ¹Ø¯Ø§Ø¯ Ø³Ø±ÙˆÛŒØ³ Ø¨Ù‡Ø¯Ø§Ø´ØªÛŒ)

### âœ… ØªØµÙ…ÛŒÙ…: SmallIntegerField Ø¨Ø§ CHOICES

**Ù‡Ù…Ø§Ù† Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ bedrooms**

### Ù†Ú©ØªÙ‡ ÙˆÛŒÚ˜Ù‡:
```python
# Ø¨Ø±Ø§ÛŒ Ø­Ù…Ø§Ù…â€ŒÙ‡Ø§ÛŒ Ù†ÛŒÙ…Ù‡ (Half Bath)
bathrooms = models.DecimalField(
    max_digits=3,
    decimal_places=1,  # 2.5 bathroom
    choices=[
        (1.0, 'Û± Ø³Ø±ÙˆÛŒØ³'),
        (1.5, 'Û±.Ûµ Ø³Ø±ÙˆÛŒØ³'),
        (2.0, 'Û² Ø³Ø±ÙˆÛŒØ³'),
        # ...
    ]
)
```

---

## 3. Parking Spaces (Ù¾Ø§Ø±Ú©ÛŒÙ†Ú¯)

### âœ… ØªØµÙ…ÛŒÙ…: SmallIntegerField Ø¨Ø§ CHOICES

```python
parking_spaces = models.SmallIntegerField(
    choices=[
        (0, 'Ø¨Ø¯ÙˆÙ† Ù¾Ø§Ø±Ú©ÛŒÙ†Ú¯'),
        (1, 'Û± Ù¾Ø§Ø±Ú©ÛŒÙ†Ú¯'),
        # ... ØªØ§ 20
    ],
    default=0,
    db_index=True
)
```

---

## 4. Year Built (Ø³Ø§Ù„ Ø³Ø§Ø®Øª) â­ **Ù…Ù‡Ù…**

### âŒ Ú¯Ø²ÛŒÙ†Ù‡ 1: ForeignKey Ø¨Ù‡ Ø¬Ø¯ÙˆÙ„ Years
```python
class YearBuilt(models.Model):
    year = models.SmallIntegerField(unique=True)
    # Ø±Ø¯ÛŒÙâ€ŒÙ‡Ø§: 1300, 1301, ..., 1403, 1404

class Property(models.Model):
    year_built = models.ForeignKey(YearBuilt)
```

**Ù…Ø´Ú©Ù„Ø§Øª:**
- âŒ Ø¨Ø§ÛŒØ¯ Ù‡Ø± Ø³Ø§Ù„ Ø±Ø¯ÛŒÙ Ø¬Ø¯ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒÙ…
- âŒ JOIN Ø§Ø¶Ø§ÙÛŒ Ø¯Ø± Ù‡Ù…Ù‡ queries
- âŒ Ù¾ÛŒÚ†ÛŒØ¯Ú¯ÛŒ ØºÛŒØ±Ø¶Ø±ÙˆØ±ÛŒ

---

### âœ… Ú¯Ø²ÛŒÙ†Ù‡ 2: SmallIntegerField Ø¨Ø§ Validation Ø¯ÛŒÙ†Ø§Ù…ÛŒÚ© (ØªÙˆØµÛŒÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯)

```python
class Property(models.Model):
    YEAR_MIN = 1300  # Ø«Ø§Ø¨Øª - ØªØºÛŒÛŒØ± Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯
    YEAR_MAX_SAFE = 1500  # constraint Ø¯ÛŒØªØ§Ø¨ÛŒØ³ (Ù…Ø­Ø§ÙØ¸Ù‡â€ŒÚ©Ø§Ø±Ø§Ù†Ù‡)
    YEAR_BUFFER = 5  # Ø¨Ø±Ø§ÛŒ validation Ø¯Ø± Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù†
    
    @classmethod
    def get_year_max_dynamic(cls):
        """Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø³Ø§Ù„ Ø­Ø¯Ø§Ú©Ø«Ø± Ø¯ÛŒÙ†Ø§Ù…ÛŒÚ©"""
        import jdatetime
        return jdatetime.datetime.now().year + cls.YEAR_BUFFER
    
    year_built = models.SmallIntegerField(
        null=True,
        blank=True,
        db_index=True,
        help_text="Ø³Ø§Ù„ Ø³Ø§Ø®Øª Ø´Ù…Ø³ÛŒ (Ù…Ø«Ù„Ø§Ù‹ Û±Û´Û°Û²)"
    )
    
    class Meta:
        constraints = [
            # Constraint Ø«Ø§Ø¨Øª - ØªØºÛŒÛŒØ± Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯!
            models.CheckConstraint(
                condition=Q(year_built__isnull=True) | 
                         (Q(year_built__gte=1300) & Q(year_built__lte=1500)),
                name='year_built_safe_range'
            ),
        ]
    
    def clean(self):
        """Validation Ø¯ÛŒÙ†Ø§Ù…ÛŒÚ©"""
        if self.year_built:
            year_max = self.get_year_max_dynamic()
            if self.year_built > year_max:
                raise ValidationError(
                    f'Ø³Ø§Ù„ Ø³Ø§Ø®Øª Ù†Ø¨Ø§ÛŒØ¯ Ø¨ÛŒØ´ØªØ± Ø§Ø² {year_max} Ø¨Ø§Ø´Ø¯'
                )
```

**Ù…Ø²Ø§ÛŒØ§:**
âœ… **Ù‡ÛŒÚ† Migration Ù„Ø§Ø²Ù… Ù†ÛŒØ³Øª** Ù‡Ø± Ø³Ø§Ù„
âœ… **Database safe** ØªØ§ Ø³Ø§Ù„ 1500
âœ… **Application validation** Ø¯ÛŒÙ†Ø§Ù…ÛŒÚ©
âœ… **Ø³Ø±Ø¹Øª Ø¨Ø§Ù„Ø§** - Ø¨Ø¯ÙˆÙ† JOIN
âœ… **Filtering Ø³Ø±ÛŒØ¹** - Index Ø±ÙˆÛŒ SmallInt

---

### ğŸ¯ Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ Filtering Ø¨Ø±Ø§ÛŒ Ø³Ø§Ù„ Ø³Ø§Ø®Øª:

#### Ø§Ù„Ù) Decade Grouping (Ú¯Ø±ÙˆÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¯Ù‡Ù‡â€ŒØ§ÛŒ)

```python
class Property(models.Model):
    year_built = models.SmallIntegerField()
    
    @property
    def decade_built(self):
        """Ø¨Ø±Ø§ÛŒ ÙÛŒÙ„ØªØ± UI"""
        if not self.year_built:
            return None
        return (self.year_built // 10) * 10
    
    # Ø¯Ø± QuerySet:
    def annotate_decade(self):
        from django.db.models import F
        from django.db.models.functions import Floor
        
        return self.annotate(
            decade=Floor(F('year_built') / 10) * 10
        )
```

**Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± API:**
```python
# ÙÛŒÙ„ØªØ±: Ø§Ù…Ù„Ø§Ú© Ø¯Ù‡Ù‡ 1390
Property.objects.filter(
    year_built__gte=1390,
    year_built__lt=1400
)

# Ú¯Ø±ÙˆÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ Ø¢Ù…Ø§Ø±
from django.db.models import Count
Property.objects.annotate_decade().values('decade').annotate(
    count=Count('id')
)
# Ù†ØªÛŒØ¬Ù‡: {1380: 1500, 1390: 3200, 1400: 2100}
```

#### Ø¨) Range Choices (Ø¨Ø±Ø§ÛŒ UI)

```python
# Ø¯Ø± Serializer ÛŒØ§ Filter
YEAR_RANGE_CHOICES = [
    ('lt_1380', 'Ù‚Ø¨Ù„ Ø§Ø² 1380'),
    ('1380_1390', '1380 ØªØ§ 1390'),
    ('1390_1400', '1390 ØªØ§ 1400'),
    ('gt_1400', 'Ø¨Ø¹Ø¯ Ø§Ø² 1400'),
]
```

---

## 5. Property Type (Ù†ÙˆØ¹ Ù…Ù„Ú©)

### âœ… ØªØµÙ…ÛŒÙ…: ForeignKey (Ù†Ù‡ CHOICES)

```python
class PropertyType(models.Model):
    title = models.CharField(max_length=50, unique=True)
    slug = models.SlugField(unique=True)
    display_order = models.IntegerField()
    
class Property(models.Model):
    property_type = models.ForeignKey(
        PropertyType,
        on_delete=models.PROTECT
    )
```

**Ú†Ø±Ø§ ForeignKeyØŸ**
- âœ… Ù‚Ø§Ø¨Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø± Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ†
- âœ… Ù‚Ø§Ø¨Ù„ ØªØ±Ø¬Ù…Ù‡ (Ú†Ù†Ø¯Ø²Ø¨Ø§Ù†Ù‡)
- âœ… SEO-friendly URLs (`/apartment/`, `/villa/`)
- âœ… ØªÙˆØ³Ø¹Ù‡â€ŒÙ¾Ø°ÛŒØ± (Ø§ÙØ²ÙˆØ¯Ù† Ù†ÙˆØ¹ Ø¬Ø¯ÛŒØ¯ Ø¨Ø¯ÙˆÙ† Migration)

---

## 6. Location (Ù…ÙˆÙ‚Ø¹ÛŒØª Ù…Ú©Ø§Ù†ÛŒ)

### âœ… Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ: Denormalization Ø¨Ø±Ø§ÛŒ Ø³Ø±Ø¹Øª

```python
class Property(models.Model):
    # ForeignKey Ø§ØµÙ„ÛŒ
    city = models.ForeignKey(City, on_delete=models.PROTECT)
    
    # Denormalized Ø¨Ø±Ø§ÛŒ Ø³Ø±Ø¹Øª
    province = models.ForeignKey(Province, on_delete=models.PROTECT)
    country = models.ForeignKey(Country, on_delete=models.PROTECT)
    
    # Ù…Ù†Ø·Ù‚Ù‡ (ÙÙ‚Ø· Ø´Ù‡Ø±Ù‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯)
    region = models.ForeignKey(
        CityRegion,
        null=True,  # Ú†ÙˆÙ† Ù‡Ù…Ù‡ Ø´Ù‡Ø±Ù‡Ø§ Ù…Ù†Ø·Ù‚Ù‡ Ù†Ø¯Ø§Ø±Ù†Ø¯
        blank=True,
        on_delete=models.SET_NULL
    )
    
    # Ù…Ø­Ù„Ù‡ (Ø¢Ø²Ø§Ø¯ Ùˆ Ø³Ø±ÛŒØ¹)
    neighborhood = models.CharField(
        max_length=120,
        blank=True,
        db_index=True,
        help_text="Ø§Ø² Ù†Ù‚Ø´Ù‡ ÛŒØ§ ÙˆØ±ÙˆØ¯ÛŒ Ú©Ø§Ø±Ø¨Ø±"
    )
    
    # Ù…Ø®ØªØµØ§Øª
    latitude = models.DecimalField(
        max_digits=10,
        decimal_places=8,
        null=True,
        db_index=True
    )
    longitude = models.DecimalField(
        max_digits=11,
        decimal_places=8,
        null=True,
        db_index=True
    )
```

**Ú†Ø±Ø§ DenormalizationØŸ**
```sql
-- Ø¨Ø¯ÙˆÙ† denormalization (Ú©Ù†Ø¯ âŒ)
SELECT p.*, c.name, pr.name 
FROM properties p
JOIN cities c ON p.city_id = c.id
JOIN provinces pr ON c.province_id = pr.id
WHERE pr.id = 8;  -- ØªÙ‡Ø±Ø§Ù†
-- Time: 25ms

-- Ø¨Ø§ denormalization (Ø³Ø±ÛŒØ¹ âœ…)
SELECT * FROM properties
WHERE province_id = 8;
-- Time: 5ms
```

---

### ğŸ—ºï¸ Ù…Ø®ØªØµØ§Øª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ

#### Ø§Ù„Ù) Ø¯Ø± City/Province

```python
class City(models.Model):
    name = models.CharField(max_length=100)
    province = models.ForeignKey(Province)
    
    # Ù…Ø®ØªØµØ§Øª Ù…Ø±Ú©Ø² Ø´Ù‡Ø± (Ø¨Ø±Ø§ÛŒ Ù†Ù‚Ø´Ù‡)
    latitude = models.DecimalField(...)
    longitude = models.DecimalField(...)
```

**Ø§Ø³ØªÙØ§Ø¯Ù‡:**
- âœ… Ù†Ù…Ø§ÛŒØ´ Ù…Ø±Ú©Ø² Ø´Ù‡Ø± Ø±ÙˆÛŒ Ù†Ù‚Ø´Ù‡
- âœ… Reverse geocoding (ØªØ´Ø®ÛŒØµ Ø´Ù‡Ø± Ø§Ø² Ù…Ø®ØªØµØ§Øª)
- âœ… Ù…Ø­Ø§Ø³Ø¨Ù‡ ÙØ§ØµÙ„Ù‡ ØªÙ‚Ø±ÛŒØ¨ÛŒ

---

#### Ø¨) Ø¯Ø± Property

```python
class Property(models.Model):
    # Ù…Ø®ØªØµØ§Øª Ø¯Ù‚ÛŒÙ‚ Ù…Ù„Ú©
    latitude = models.DecimalField(...)
    longitude = models.DecimalField(...)
```

**Ø§Ø³ØªÙØ§Ø¯Ù‡:**
- âœ… Ù†Ù…Ø§ÛŒØ´ Ø¯Ù‚ÛŒÙ‚ Ø±ÙˆÛŒ Ù†Ù‚Ø´Ù‡
- âœ… Ø§Ù†ØªØ®Ø§Ø¨ Ø§Ø² Ù†Ù‚Ø´Ù‡ ØªÙˆØ³Ø· Ú©Ø§Ø±Ø¨Ø±
- âœ… Ø¬Ø³ØªØ¬ÙˆÛŒ Ù†Ø²Ø¯ÛŒÚ©ÛŒ (proximity search)
- âœ… Reverse geocoding (Ø¯Ø±ÛŒØ§ÙØª Ø¢Ø¯Ø±Ø³ Ø§Ø² Ù…Ø®ØªØµØ§Øª)

**Ø¢ÛŒØ§ ØªÚ©Ø±Ø§Ø± Ø§Ø³ØªØŸ**
> Ø¨Ù„Ù‡ØŒ Ø§Ù…Ø§ Ø§ÛŒÙ† denormalization Ø¶Ø±ÙˆØ±ÛŒ Ø§Ø³Øª Ø¨Ø±Ø§ÛŒ:
> - Ø³Ø±Ø¹Øª Query Ø¨Ø¯ÙˆÙ† JOIN
> - Ø¯Ù‚Øª Ø¨Ø§Ù„Ø§ (Ù…Ø®ØªØµØ§Øª Ù…Ù„Ú© â‰  Ù…Ø±Ú©Ø² Ø´Ù‡Ø±)
> - Map integration Ø³Ø±ÛŒØ¹

---

### ğŸ™ï¸ Region (Ù…Ù†Ø·Ù‚Ù‡)

```python
class CityRegion(models.Model):
    city = models.ForeignKey(City)
    name = models.CharField(max_length=50)  # "Ù…Ù†Ø·Ù‚Ù‡ Û±"
    code = models.IntegerField()  # 1, 2, 3, ...
    
    class Meta:
        unique_together = [('city', 'code')]

class Property(models.Model):
    region = models.ForeignKey(
        CityRegion,
        null=True,  # âœ… Ú†ÙˆÙ† Ù‡Ù…Ù‡ Ø´Ù‡Ø±Ù‡Ø§ Ù…Ù†Ø·Ù‚Ù‡ Ù†Ø¯Ø§Ø±Ù†Ø¯
        blank=True
    )
```

**Ø¢ÛŒØ§ Ø¯Ø±Ø³Øª Ø§Ø³ØªØŸ**
> âœ… Ø¨Ù„Ù‡! Ú©Ø§Ù…Ù„Ø§Ù‹ ØµØ­ÛŒØ­ Ø§Ø³Øª:
> - ÙÙ‚Ø· Ø´Ù‡Ø±Ù‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯ Ù…Ù†Ø·Ù‚Ù‡ Ø¯Ø§Ø±Ù†Ø¯ (ØªÙ‡Ø±Ø§Ù†ØŒ Ù…Ø´Ù‡Ø¯ØŒ ...)
> - nullable Ø¨ÙˆØ¯Ù† Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ø§Ø³Øª
> - Ø¨Ø§ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª populate Ø´Ø¯Ù‡ (ØµØ­ÛŒØ­ Ø§Ø³Øª)

---

# ğŸ” Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ Index {#Ø§ÛŒÙ†Ø¯Ú©Ø³}

## 1. Composite Index (ÙÛŒÙ„ØªØ± ØªØ±Ú©ÛŒØ¨ÛŒ)

```python
class Meta:
    indexes = [
        # ÙÛŒÙ„ØªØ± Ø§ØµÙ„ÛŒ (80% queries)
        models.Index(
            fields=['city', 'property_type', 'bedrooms', 'bathrooms', '-price'],
            name='idx_main_filter'
        ),
    ]
```

**Ú†Ø±Ø§ Ø§ÛŒÙ† ØªØ±ØªÛŒØ¨ØŸ**
1. `city`: Ø¨ÛŒØ´ØªØ±ÛŒÙ† selectivity
2. `property_type`: Ø¯ÙˆÙ…ÛŒÙ† ÙÛŒÙ„ØªØ± Ù¾Ø±Ú©Ø§Ø±Ø¨Ø±Ø¯
3. `bedrooms`, `bathrooms`: ÙÛŒÙ„ØªØ±Ù‡Ø§ÛŒ Ø¹Ø¯Ø¯ÛŒ
4. `-price`: sorting

---

## 2. Partial Index (ÙÙ‚Ø· Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡â€ŒÙ‡Ø§)

```python
class Meta:
    indexes = [
        models.Index(
            fields=['city', 'bedrooms', '-created_at'],
            condition=Q(is_published=True, is_public=True),
            name='idx_published_fast'
        ),
    ]
```

**Ù…Ø²Ø§ÛŒØ§:**
âœ… **50% Ú©ÙˆÚ†Ú©â€ŒØªØ±**: ÙÙ‚Ø· Ø§Ù…Ù„Ø§Ú© Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡
âœ… **2x Ø³Ø±ÛŒØ¹â€ŒØªØ±**: Index Ú©ÙˆÚ†Ú©â€ŒØªØ± = Ø³Ø±Ø¹Øª Ø¨ÛŒØ´ØªØ±
âœ… **PostgreSQL Exclusive**: ÙˆÛŒÚ˜Ú¯ÛŒ Ù…Ù†Ø­ØµØ± Ø¨Ù‡ ÙØ±Ø¯

---

## 3. BRIN Index (Ø¨Ø±Ø§ÛŒ Time-Series)

```python
from django.contrib.postgres.indexes import BrinIndex

class Meta:
    indexes = [
        BrinIndex(
            fields=['created_at'],
            pages_per_range=64,
            name='idx_brin_created'
        ),
    ]
```

**Ú†Ø±Ø§ BRINØŸ**
âœ… **100x Ú©ÙˆÚ†Ú©â€ŒØªØ±** Ø§Ø² B-tree
âœ… **Ø³Ø±ÛŒØ¹ Ø¨Ø±Ø§ÛŒ Range**: `created_at >= '2024-01-01'`
âœ… **Ø§ÛŒØ¯Ù‡â€ŒØ¢Ù„ Ø¨Ø±Ø§ÛŒ Time-Series**

---

## 4. GIN Index (Full-Text Search)

```python
from django.contrib.postgres.indexes import GinIndex
from django.contrib.postgres.search import SearchVectorField

class Property(models.Model):
    search_vector = SearchVectorField(null=True)
    
    class Meta:
        indexes = [
            GinIndex(fields=['search_vector'], name='idx_gin_search'),
        ]
```

---

# ğŸ¯ Ù…Ø³Ø§Ø¦Ù„ Ø®Ø§Øµ {#Ù…Ø³Ø§Ø¦Ù„-Ø®Ø§Øµ}

## 1. Ø¢ÛŒØ§ Ø¨Ø§ÛŒØ¯ Abstract Model Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…ØŸ

### âŒ Ø®ÛŒØ±ØŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ù¾Ø±ÙˆÚ˜Ù‡ ØªÙˆØµÛŒÙ‡ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯

**Ú†Ø±Ø§ØŸ**
```python
# âŒ Abstract Model: Ù¾ÛŒÚ†ÛŒØ¯Ú¯ÛŒ Ø¨ÛŒØ´ Ø§Ø² Ø­Ø¯
class PropertyBase(models.Model):
    title = models.CharField()
    
    class Meta:
        abstract = True

class ResidentialProperty(PropertyBase):
    bedrooms = models.SmallIntegerField()

class CommercialProperty(PropertyBase):
    office_count = models.SmallIntegerField()
```

**Ù…Ø´Ú©Ù„Ø§Øª:**
- âŒ Query Ø±ÙˆÛŒ Ù‡Ù…Ù‡ Ø§Ù†ÙˆØ§Ø¹ Ø§Ù…Ù„Ø§Ú© Ø³Ø®Øª Ø§Ø³Øª
- âŒ Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù† ÛŒÚ© Ù„ÛŒØ³Øª ØªØ±Ú©ÛŒØ¨ÛŒ Ú¯Ø±ÙØª
- âŒ Ù¾ÛŒÚ†ÛŒØ¯Ú¯ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª

---

### âœ… Ø¨Ù‡ØªØ±: JSONField Ø¨Ø±Ø§ÛŒ ØªÙØ§ÙˆØªâ€ŒÙ‡Ø§

```python
class Property(models.Model):
    # ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ù…Ø´ØªØ±Ú©
    title = models.CharField()
    property_type = models.ForeignKey(PropertyType)
    
    # ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¹Ù…ÙˆÙ…ÛŒ
    bedrooms = models.SmallIntegerField(null=True)  # ÙÙ‚Ø· Ù…Ø³Ú©ÙˆÙ†ÛŒ
    office_count = models.SmallIntegerField(null=True)  # ÙÙ‚Ø· ØªØ¬Ø§Ø±ÛŒ
    
    # ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø§Ø®ØªÛŒØ§Ø±ÛŒ/ØºÛŒØ±Ù…Ø¹Ù…ÙˆÙ„
    extra_specs = models.JSONField(
        default=dict,
        blank=True,
        help_text="Ù…Ø´Ø®ØµØ§Øª Ø§Ø¶Ø§ÙÛŒ Ø®Ø§Øµ"
    )
```

**Ù…Ø²Ø§ÛŒØ§:**
âœ… **ÛŒÚ© Ø¬Ø¯ÙˆÙ„** Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ù‡
âœ… **Query Ø³Ø§Ø¯Ù‡** Ø±ÙˆÛŒ Ù‡Ù…Ù‡ Ø§Ù†ÙˆØ§Ø¹
âœ… **Flexibility** Ø¨Ø±Ø§ÛŒ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø®Ø§Øµ

---

## 2. Ø¢ÛŒØ§ Ø¨Ø§ÛŒØ¯ Ø§Ø² Generic Relations Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…ØŸ

### âŒ Ø®ÛŒØ±ØŒ Ø§ØµÙ„Ø§Ù‹ ØªÙˆØµÛŒÙ‡ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯

```python
# âŒ Generic Relation: Anti-Pattern
from django.contrib.contenttypes.fields import GenericForeignKey

class PropertyImage(models.Model):
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = GenericForeignKey()
```

**Ù…Ø´Ú©Ù„Ø§Øª:**
- âŒâŒ **Ø¨Ø¯ÙˆÙ† Foreign Key Constraint** (Ø®Ø·Ø±Ù†Ø§Ú©!)
- âŒâŒ **Query Ø®ÛŒÙ„ÛŒ Ú©Ù†Ø¯**
- âŒâŒ **Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù† Index Ø²Ø¯**
- âŒâŒ **Ø¯ÛŒØ¨Ø§Ú¯ Ø³Ø®Øª**

---

### âœ… Ø¨Ù‡ØªØ±: ForeignKey Ù…Ø³ØªÙ‚ÛŒÙ…

```python
class PropertyImage(models.Model):
    property = models.ForeignKey(
        Property,
        on_delete=models.CASCADE,
        related_name='images'
    )
    image = models.ForeignKey(ImageMedia)
    is_main = models.BooleanField(default=False)
    order = models.PositiveIntegerField(default=0)
```

---

## 3. SEO: Ø¢ÛŒØ§ Ø¨Ø§ÛŒØ¯ JSONField Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…ØŸ

### âš ï¸ Ø¨Ø³ØªÚ¯ÛŒ Ø¯Ø§Ø±Ø¯

#### Ø§Ù„Ù) Ø¨Ø±Ø§ÛŒ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø«Ø§Ø¨Øª SEO â†’ âŒ Ø®ÛŒØ±

```python
# âœ… ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ø¨Ø±Ø§ÛŒ SEO Ø§ØµÙ„ÛŒ
class Property(models.Model):
    # SEO Fields (Ù…Ù‡Ù… Ø¨Ø±Ø§ÛŒ index)
    meta_title = models.CharField(max_length=70)
    meta_description = models.CharField(max_length=160)
    og_title = models.CharField(max_length=70)
    og_description = models.CharField(max_length=160)
    og_image = models.ForeignKey(ImageMedia, null=True)
```

**Ú†Ø±Ø§ Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ØŸ**
âœ… **Index** Ø±ÙˆÛŒ meta_title
âœ… **Validation** Ø±Ø§Ø­Øªâ€ŒØªØ±
âœ… **Query** Ø³Ø±ÛŒØ¹â€ŒØªØ±

---

#### Ø¨) Ø¨Ø±Ø§ÛŒ Schema Markup â†’ âœ… JSONField

```python
class Property(models.Model):
    # Schema.org JSON-LD
    structured_data = models.JSONField(
        default=dict,
        blank=True,
        editable=False,  # Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø®ÙˆØ¯Ú©Ø§Ø±
        help_text="JSON-LD for rich snippets"
    )
    
    def generate_structured_data(self):
        return {
            "@context": "https://schema.org",
            "@type": "RealEstateListing",
            "name": self.meta_title,
            "address": {...},
            "offers": {...}
        }
    
    def save(self, *args, **kwargs):
        self.structured_data = self.generate_structured_data()
        super().save(*args, **kwargs)
```

---

# ğŸ“ˆ Ù†ØªÛŒØ¬Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ùˆ ØªÙˆØµÛŒÙ‡ Ù†Ù‡Ø§ÛŒÛŒ {#Ù†ØªÛŒØ¬Ù‡}

## âœ… Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ Ù†Ù‡Ø§ÛŒÛŒ ØªÙˆØµÛŒÙ‡ Ø´Ø¯Ù‡:

### 1. ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¹Ø¯Ø¯ÛŒ Ù¾Ø±Ú©Ø§Ø±Ø¨Ø±Ø¯
```
âœ… bedrooms          â†’ SmallIntegerField + CHOICES
âœ… bathrooms         â†’ SmallIntegerField + CHOICES
âœ… parking_spaces    â†’ SmallIntegerField + CHOICES
âœ… year_built        â†’ SmallIntegerField + Dynamic Validation
âœ… kitchens          â†’ SmallIntegerField
âœ… living_rooms      â†’ SmallIntegerField
âœ… storage_rooms     â†’ SmallIntegerField
```

### 2. ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ù‚Ø§Ø¨Ù„ Ù…Ø¯ÛŒØ±ÛŒØª
```
âœ… property_type     â†’ ForeignKey(PropertyType)
âœ… state            â†’ ForeignKey(PropertyState)
âœ… city             â†’ ForeignKey(City)
âœ… province         â†’ ForeignKey(Province) [Denormalized]
âœ… region           â†’ ForeignKey(CityRegion) [nullable]
```

### 3. ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ú†Ù†Ø¯Ú¯Ø§Ù†Ù‡
```
âœ… features         â†’ ManyToMany(PropertyFeature)
âœ… labels           â†’ ManyToMany(PropertyLabel)
âœ… tags             â†’ ManyToMany(PropertyTag)
```

### 4. ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ù…Ú©Ø§Ù†ÛŒ
```
âœ… neighborhood     â†’ CharField (Ø¢Ø²Ø§Ø¯)
âœ… latitude         â†’ DecimalField [Denormalized]
âœ… longitude        â†’ DecimalField [Denormalized]
```

### 5. ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø§Ø®ØªÛŒØ§Ø±ÛŒ
```
âœ… extra_specs      â†’ JSONField (Ù…Ø´Ø®ØµØ§Øª ØºÛŒØ±Ù…Ø¹Ù…ÙˆÙ„)
âœ… structured_data  â†’ JSONField (Schema.org)
```

---

## ğŸš€ Ù…Ø²Ø§ÛŒØ§ÛŒ Ø§ÛŒÙ† Ù…Ø¹Ù…Ø§Ø±ÛŒ:

1. **Ø³Ø±Ø¹Øª Ø¨Ø§Ù„Ø§**
   - âœ… ÙÛŒÙ„ØªØ± Ø¨Ø¯ÙˆÙ† JOIN: 5-10ms
   - âœ… Index Ú©ÙˆÚ†Ú©: 50MB Ø¨Ø±Ø§ÛŒ 100K Ù…Ù„Ú©
   - âœ… Cache-friendly

2. **Ù…Ù‚ÛŒØ§Ø³â€ŒÙ¾Ø°ÛŒØ±ÛŒ**
   - âœ… ØªØ§ 1,000,000+ Ù…Ù„Ú© Ø¨Ø¯ÙˆÙ† Ù…Ø´Ú©Ù„
   - âœ… Partial Index Ø¨Ø±Ø§ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ
   - âœ… BRIN Ø¨Ø±Ø§ÛŒ Time-Series

3. **Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ±ÛŒ**
   - âœ… JSONField Ø¨Ø±Ø§ÛŒ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø®Ø§Øµ
   - âœ… ManyToMany Ø¨Ø±Ø§ÛŒ Ø§Ù…Ú©Ø§Ù†Ø§Øª
   - âœ… ForeignKey Ø¨Ø±Ø§ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù‚Ø§Ø¨Ù„ Ù…Ø¯ÛŒØ±ÛŒØª

4. **Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ø¢Ø³Ø§Ù†**
   - âœ… Ø¨Ø¯ÙˆÙ† Abstract Model Ù¾ÛŒÚ†ÛŒØ¯Ù‡
   - âœ… Ø¨Ø¯ÙˆÙ† Generic Relation
   - âœ… Ú©Ø¯ Ø³Ø§Ø¯Ù‡ Ùˆ Ø®ÙˆØ§Ù†Ø§

5. **SEO Ùˆ Performance**
   - âœ… ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ SEO Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡
   - âœ… Full-Text Search Ø¨Ø§ GIN Index
   - âœ… Structured Data Ø¨Ø±Ø§ÛŒ Rich Snippets

---

## ğŸ“Š Ù…Ù‚Ø§ÛŒØ³Ù‡ Ù†Ù‡Ø§ÛŒÛŒ Ø¨Ø§ Ø±ÙˆÛŒÚ©Ø±Ø¯Ù‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø±:

| Ù…Ø¹ÛŒØ§Ø± | Denormalized (ØªÙˆØµÛŒÙ‡ Ø´Ø¯Ù‡) | ForeignKey Ù‡Ù…Ù‡ Ø¬Ø§ | Abstract Model |
|-------|-------------------------|------------------|----------------|
| **Ø³Ø±Ø¹Øª Query** | 5-10ms âœ… | 25-50ms âŒ | 50-100ms âŒâŒ |
| **Index Size** | 50MB âœ… | 150MB âŒ | 200MB âŒâŒ |
| **Ù¾ÛŒÚ†ÛŒØ¯Ú¯ÛŒ Ú©Ø¯** | Ø³Ø§Ø¯Ù‡ âœ… | Ù…ØªÙˆØ³Ø· âš ï¸ | Ù¾ÛŒÚ†ÛŒØ¯Ù‡ âŒ |
| **Filtering** | Ø¨Ø³ÛŒØ§Ø± Ø³Ø±ÛŒØ¹ âœ… | Ú©Ù†Ø¯ âŒ | Ø®ÛŒÙ„ÛŒ Ú©Ù†Ø¯ âŒâŒ |
| **Cache Hit** | 95% âœ… | 70% âŒ | 50% âŒâŒ |
| **Ù…Ù‚ÛŒØ§Ø³â€ŒÙ¾Ø°ÛŒØ±ÛŒ** | Ø¹Ø§Ù„ÛŒ âœ… | Ù…ØªÙˆØ³Ø· âš ï¸ | Ø¶Ø¹ÛŒÙ âŒ |
| **Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ** | Ø¢Ø³Ø§Ù† âœ… | Ù…ØªÙˆØ³Ø· âš ï¸ | Ø³Ø®Øª âŒ |

---

## ğŸ¯ Ù…Ø±Ø§Ø­Ù„ Ø¨Ø¹Ø¯ÛŒ:

### ÙØ§Ø² 1: Ø¨Ø±Ø±Ø³ÛŒ Ùˆ ØªØ§ÛŒÛŒØ¯
- [ ] Ø¨Ø±Ø±Ø³ÛŒ ØªØ­Ù„ÛŒÙ„ ÙÙˆÙ‚
- [ ] ØªØ§ÛŒÛŒØ¯ Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ
- [ ] ØªØµÙ…ÛŒÙ… Ù†Ù‡Ø§ÛŒÛŒ

### ÙØ§Ø² 2: Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ
- [ ] Ø¨Ø§Ø²Ù†ÙˆÛŒØ³ÛŒ Property Model
- [ ] Ø§ÛŒØ¬Ø§Ø¯ Index Ù‡Ø§ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡
- [ ] Migration Ù‡Ø§

### ÙØ§Ø² 3: ØªØ³Øª Ùˆ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ
- [ ] Ø¨Ù†Ú†Ù…Ø§Ø±Ú© Performance
- [ ] ØªØ³Øª Ø¨Ø§ 100K Ù…Ù„Ú©
- [ ] Fine-tuning

---

## ğŸ’¬ Ø³ÙˆØ§Ù„Ø§Øª Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡ØŸ

Ø§Ú¯Ø± Ù‡Ø± Ø³ÙˆØ§Ù„ÛŒ Ø¯Ø±Ø¨Ø§Ø±Ù‡:
- Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ Indexing
- Ù…Ø¯ÛŒØ±ÛŒØª Ø³Ø§Ù„ Ø³Ø§Ø®Øª
- Denormalization vs Normalization
- Performance Optimization

Ø¯Ø§Ø±ÛŒØ¯ØŒ Ø¨ÙØ±Ù…Ø§ÛŒÛŒØ¯ ØªØ§ ØªÙˆØ¶ÛŒØ­ Ø¯Ù‡Ù….