1. âŒ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¹Ø¯Ø¯ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ - Ù†Ø¨Ø§ÛŒØ¯ ForeignKey Ø¨Ø´Ù†!
Ú†Ø±Ø§ØŸ
python# âŒ BAD: Creating separate tables
class BedroomCount(models.Model):
    count = models.IntegerField()
    
class Property(models.Model):
    bedrooms = models.ForeignKey(BedroomCount)  # âŒ JOIN overhead!

# âœ… GOOD: Direct fields with optimization
class Property(models.Model):
    bedrooms = models.SmallIntegerField(db_index=True)  # âœ… Fast!
Ø¯Ù„Ø§ÛŒÙ„:

Performance: Ø¨Ø§ 100k propertyØŒ Ù‡Ø± JOIN Ù‡Ø²ÛŒÙ†Ù‡ Ø¯Ø§Ø±Ù‡
Simplicity: queries Ø³Ø§Ø¯Ù‡â€ŒØªØ± Ùˆ Ø³Ø±ÛŒØ¹â€ŒØªØ±
PostgreSQL Optimization: integer indexes Ø®ÛŒÙ„ÛŒ Ø³Ø±ÛŒØ¹ Ù‡Ø³ØªÙ†Ø¯
No Real Benefit: Ø§ÛŒÙ† ÙÛŒÙ„Ø¯Ù‡Ø§ ÙˆØ§Ù‚Ø¹Ø§Ù‹ ØªÚ©Ø±Ø§Ø±ÛŒ Ù†ÛŒØ³ØªÙ†Ø¯ - Ù‡Ø± property Ù…Ù‚Ø¯Ø§Ø± Ø®Ø§Øµ Ø®ÙˆØ¯Ø´ Ø±Ùˆ Ø¯Ø§Ø±Ù‡

2. âœ… Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ: SmallIntegerField
ØªØºÛŒÛŒØ± Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ ØµØ±ÙÙ‡â€ŒØ¬ÙˆÛŒÛŒ 50% ÙØ¶Ø§:Optimized Property Model FieldsCodeÂ # Backend/src/real_estate/models/property.py
# Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒâ€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¹Ø¯Ø¯ÛŒ

from django.db import models
from django.core.validators import MinValueValidator, MaxValueValidator

class Property(BaseModel, SEOMixin):
    # ... (rest of fi3. âœ… Ù…Ø®ØªØµØ§Øª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ - Ú©Ø§Ù…Ù„Ø§Ù‹ Ø¯Ø±Ø³ØªÙ‡!
Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ ÙØ¹Ù„ÛŒ Ø´Ù…Ø§ Ø¹Ø§Ù„ÛŒÙ‡:
python# âœ… CORRECT APPROACH: Denormalization for performance

# Province: Center coordinates for map zoom
Province:
  latitude, longitude  # âœ… For zooming to province

# City: Center coordinates for map navigation  
City:
  latitude, longitude  # âœ… For zooming to city

# Property: Exact location
Property:
  latitude, longitude  # âœ… For pin on map
  city, province      # âœ… Denormalized for fast filtering
Ú†Ø±Ø§ Ø¯Ø±Ø³ØªÙ‡ØŸ

Zero JOIN overhead: Property Ù…Ø³ØªÙ‚ÛŒÙ…Ø§Ù‹ coordinates Ø¯Ø§Ø±Ù‡
Fast radius search: Ø¨Ø§ index Ø±ÙˆÛŒ lat/lng
Separate use cases: Ù‡Ø± level Ù…Ø®ØªØµØ§Øª Ø®Ø§Øµ Ø®ÙˆØ¯Ø´ Ø±Ùˆ Ø¯Ø§Ø±Ù‡
PostgreSQL optimization: Decimal fields Ø¨Ø§ precision=8 Ø®ÛŒÙ„ÛŒ Ø³Ø±ÛŒØ¹ Ù‡Ø³ØªÙ†Ø¯
Location Model Analysis & Best PracticesCodeÂ # Backend/src/real_estate/models/location.py
# ØªØ­Ù„ÛŒÙ„ Ùˆ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…Ø¯Ù„ Location

"""
âœ… Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ ÙØ¹Ù„ÛŒ: CORRECT & OPTIMAL

Ú†Ø±Ø§ coordinates Ø¯Ø± Ø³Ù‡ Ø³Ø·Ø­ Ø¯Ø§Ø±ÛŒÙ…ØŸ
==========================================
1. Province.latitude/longitude â†’ Zoom to province on m4. âœ… Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ Region/Neighborhood - Ø¹Ø§Ù„ÛŒÙ‡!
Ù…Ù†Ø·Ù‚ Ø´Ù…Ø§ Ú©Ø§Ù…Ù„Ø§Ù‹ Ø¯Ø±Ø³ØªÙ‡:
python# âœ… HYBRID APPROACH: Best of both worlds!

region = ForeignKey(CityRegion, optional=True)  # âœ… Structured (Tehran 1-22)
neighborhood = CharField()                       # âœ… Free text (all cities)
Ú†Ø±Ø§ Ø¨Ù‡ØªØ±ÛŒÙ†Ù‡ØŸ

Flexibility: Ø´Ù‡Ø±Ù‡Ø§ÛŒ Ú©ÙˆÚ†Ú© neighborhood text Ø¯Ø§Ø±Ù†Ø¯
Structure: Ø´Ù‡Ø±Ù‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯ region structured Ø¯Ø§Ø±Ù†Ø¯
Performance: region Ø¨Ø±Ø§ÛŒ filterØŒ neighborhood Ø¨Ø±Ø§ÛŒ search
UX: map selection â†’ auto-fill both!
Zero-Downtime Migration: Integer â†’ SmallIntegerCodeÂ # Backend/src/real_estate/migrations/XXXX_optimize_numeric_fields.py
# Migration Ø¨Ø±Ø§ÛŒ ØªØ¨Ø¯ÛŒÙ„ Integer â†’ SmallInteger Ø¨Ø¯ÙˆÙ† downtime

from django.db import migrations, models
import django.core.validators


class Migration(migrations.Migration):
    """
Ø®Ù„Ø§ØµÙ‡ Ùˆ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª Ù†Ù‡Ø§ÛŒÛŒ:Real Estate Performance: Best Practices SummaryDocumentÂ # Real Estate Platform: Performance Best Practices
## Ø¨Ø±Ø§ÛŒ 100k+ Ø§Ù…Ù„Ø§Ú© Ø¨Ø§ Django + PostgreSQL + React

---

## âœ… ØªØµÙ…ÛŒÙ…Ø§Øª Ø¯Ø±Ø³Øª ÙØ¹Ù„ÛŒ Ø´Ù…Ø§

### 1. ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¹Ø¯Ø¯ÛŒ (Numeric Fields)
```python
# âœ… CORRECT: Keep as direct fields (not ForeignKey)
bedrooms = modeÛŒÚ© Ù†Ú©ØªÙ‡ Ù…Ù‡Ù… Ø¯ÛŒÚ¯Ù‡:Django QuerySet Optimization ExamplesCodeÂ # Backend/src/real_estate/views/admin/property_views.py
# Ù†Ù…ÙˆÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Query Ø¨Ø±Ø§ÛŒ API Ø¨Ø§ 100k+ properties

from django.db.models import Prefetch, Count, Avg, Q
from src.real_estate.models.property import Property
from src.real_estate.models.mğŸ“‹ Ø®Ù„Ø§ØµÙ‡ ØªØµÙ…ÛŒÙ…Ø§Øª:
âœ… 1. ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¹Ø¯Ø¯ÛŒ - Ù‡ÛŒÚ† ØªØºÛŒÛŒØ±ÛŒ Ù†Ù…ÛŒØ®ÙˆØ§Ø¯!
python# âŒ Ù†Ù‡ ForeignKey (JOIN overhead)
# âœ… Ø¨Ù„Ù‡ IntegerField â†’ SmallIntegerField (50% ÙØ¶Ø§ Ú©Ù…ØªØ±)

bedrooms = models.SmallIntegerField()  # Instead of IntegerField
# Ø§ÛŒÙ† ØªÙ†Ù‡Ø§ ØªØºÛŒÛŒØ± Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ Ø§Ø³Øª!
Ø¯Ù„Ø§ÛŒÙ„:

ØªÚ©Ø±Ø§Ø±ÛŒ Ù†ÛŒØ³ØªÙ†Ø¯ (Ù‡Ø± property Ù…Ù‚Ø¯Ø§Ø± Ø®Ø§Øµ Ø®ÙˆØ¯Ø´)
ForeignKey ÙÙ‚Ø· JOIN Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒÚ©Ù†Ù‡ (Ú©Ù†Ø¯ØªØ±)
SmallIntegerField: Ù‡Ù…ÙˆÙ† Ø³Ø±Ø¹Øª + Ù†ØµÙ ÙØ¶Ø§


âœ… 2. Ù…Ø®ØªØµØ§Øª - Ú©Ø§Ù…Ù„Ø§Ù‹ Ø¯Ø±Ø³ØªÙ‡!
pythonProvince: latitude, longitude  # âœ… For zoom
City: latitude, longitude      # âœ… For zoom
Property: latitude, longitude  # âœ… For pin
Ú†Ø±Ø§ Ø¯Ø±Ø³ØªÙ‡:

Ù‡Ø± Ø³Ø·Ø­ Ú©Ø§Ø±Ø¨Ø±Ø¯ Ø®Ø§Øµ Ø®ÙˆØ¯Ø´ Ø±Ùˆ Ø¯Ø§Ø±Ù‡
Ø¨Ø¯ÙˆÙ† JOIN â†’ Ø³Ø±ÛŒØ¹
DecimalField Ø¨Ø§ 8 decimal Ú©Ø§ÙÛŒÙ‡ (PostGIS Ø§Ø¶Ø§ÙÛŒÙ‡)


âœ… 3. Region/Neighborhood - Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ hybrid Ø¹Ø§Ù„ÛŒÙ‡!
pythonregion = ForeignKey(CityRegion, optional=True)  # ØªÙ‡Ø±Ø§Ù† 1-22
neighborhood = CharField()                       # Ù‡Ù…Ù‡ Ø´Ù‡Ø±Ù‡Ø§
Perfect balance:

Structure Ø¨Ø±Ø§ÛŒ Ø´Ù‡Ø±Ù‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯
Flexibility Ø¨Ø±Ø§ÛŒ Ø´Ù‡Ø±Ù‡Ø§ÛŒ Ú©ÙˆÚ†Ú©


ğŸ¯ Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ:
Ù…ÙˆØ±Ø¯ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ù„ÛŒØªØºÛŒÛŒØ± Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒØ§ÙˆÙ„ÙˆÛŒØªÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¹Ø¯Ø¯ÛŒIntegerFieldSmallIntegerFieldğŸ”¥ HighÙ…Ø®ØªØµØ§ØªDecimalFieldØ¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ± âœ…-LocationHybridØ¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ± âœ…-IndexesØ®ÙˆØ¨Ú†Ù†Ø¯ composite indexMediumQuerySetÙ†ÛŒØ§Ø² Ø¨Ù‡ Ø¨Ù‡Ø¨ÙˆØ¯OptimizationğŸ”¥ High
Ø²Ù…Ø§Ù† migration: 5-10 Ø«Ø§Ù†ÛŒÙ‡
Downtime: 0 Ø«Ø§Ù†ÛŒÙ‡
Ø¨Ù‡Ø¨ÙˆØ¯ performance: 50% ÙØ¶Ø§ + 20% Ø³Ø±Ø¹Øª
Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§ Ø®ÛŒÙ„ÛŒ Ø®ÙˆØ¨ Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡! ÙÙ‚Ø· Ø¨Ø§ SmallIntegerField Ùˆ Ø¨Ù‡Ø¨ÙˆØ¯ QuerySet Ù‡Ø§ØŒ Ø¨Ø±Ø§ÛŒ 100k+ Ø§Ù…Ù„Ø§Ú© Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ§ÛŒØ¯ ğŸš€Ø§ØµÙ„Ø§ Ø®ÙˆÙ†Ø¯ÛŒ Ù…Ø§Ø¯Ø± Ø¬Ù†Ø¯Ù‡ Ú†ÛŒ Ù†ÙˆØ´ØªÙ…ØŸ Ù…ÛŒÚ¯Ù… Ø³Ø§Ù„ Ø³Ø§Ø®Øª Ù…Ø´Ø®ØµÙ‡ Ù†Ø¨Ø§Ø¯ Ø¬Ø¯Ø§ Ø¨Ø§Ø´Ù‡ Ùˆ ÙÛŒÙ„ØªØ± Ù‡Ù… Ø¯Ø§Ø±Ù‡ Ùˆ ØªÙØ¯Ø§Ø¯ Ø§ØªØ§Ù‚ Ø®ÙˆØ§Ø¨ Ùˆ Ø­Ù…Ø§Ù… Ù¾Ø§Ú©Ø±ÛŒÙ†Ú¯ Ø§ÛŒÙ†Ù‡Ø§Ù‡ Ù‡Ù… ØªØºØ¯Ø§Ø¯ Ù…Ø´Ø®Øµ Ø¯Ø§Ø±Ù†Ø¯ Ù…ÛŒÚ¯Ù… Ù‡ÛŒ Ø¨Ø§ Ø§ÛŒØ­Ø§Ø¯ ØªÚ©Ø±Ø§Ø± Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ ÙˆØ§Ø±Ø¯ Ù…ÛŒØ´Ù‡ Ø§ÛŒÙ†Ø§ Ú†ÛŒ Ù…ØªÙˆØ¬Ù‡ Ø´Ø¯ÛŒ Ø§ÛŒÙ†Ø§ Ú†ÛŒ Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø§Ø±Ù† Ø§ÛŒÙ†Ø§ Ú†ÛŒØŸ Ø¨Ø§ Ø§ÛŒÙ†Ø§ Ú†ÛŒÚ©Ø§Ø± Ú©Ù†ÛŒÙ… Ø¨Ù‡ØªØ± Ù†ÛŒØ³Øª Ø¬Ø¯Ø§ Ø´Ù‡ Ø§Ù„Ø¨ØªÙ‡ Ø®ÛŒÙ„ÛŒ foreinkey Ù…ÛŒØ´Ù‡ØŸ Ú†ÛŒÚ©Ø§Ø± Ú©Ù†ÛŒÙ…ØŸ10:38 PMWeighed database normalization tradeoffs against query performance costs.22sØ¢Ù‡ Ù…ØªÙˆØ¬Ù‡ Ø´Ø¯Ù…! Ø§ÙˆÙ† Ø¯Ø§Ø±Ù‡ Ù…ÛŒÚ¯Ù‡:

Ø³Ø§Ù„ Ø³Ø§Ø®Øª (year_built) Ù…Ø´Ø®ØµÙ‡: Ù…Ø«Ù„Ø§Ù‹ 1380ØŒ 1390ØŒ 1400ØŒ ... Ø§ÛŒÙ†Ø§ Ù…Ø­Ø¯ÙˆØ¯ Ù‡Ø³ØªÙ†Ø¯!
ØªØ¹Ø¯Ø§Ø¯ Ø§ØªØ§Ù‚ Ø®ÙˆØ§Ø¨: 1ØŒ 2ØŒ 3ØŒ 4ØŒ 5 (Ù…Ø­Ø¯ÙˆØ¯!)
ØªØ¹Ø¯Ø§Ø¯ Ø­Ù…Ø§Ù…: 1ØŒ 2ØŒ 3ØŒ 4 (Ù…Ø­Ø¯ÙˆØ¯!)
ØªØ¹Ø¯Ø§Ø¯ Ù¾Ø§Ø±Ú©ÛŒÙ†Ú¯: 0ØŒ 1ØŒ 2ØŒ 3 (Ù…Ø­Ø¯ÙˆØ¯!)

Ø§ÙˆÙ† Ù…ÛŒÚ¯Ù‡ Ø§ÛŒÙ† Ù…Ù‚Ø§Ø¯ÛŒØ± ØªÚ©Ø±Ø§Ø±ÛŒ Ù‡Ø³ØªÙ†Ø¯! Ù…Ø«Ù„Ø§Ù‹ 10000 ØªØ§ property Ø¨Ø§ 3 ØªØ§ Ø§ØªØ§Ù‚ Ø®ÙˆØ§Ø¨ Ø¯Ø§Ø±Ù†Ø¯ØŒ Ù¾Ø³ Ø¹Ø¯Ø¯ "3" Ø¯Ø§Ø±Ù‡ 10000 Ø¨Ø§Ø± ØªÚ©Ø±Ø§Ø± Ù…ÛŒØ´Ù‡ Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³!
Ø³ÙˆØ§Ù„Ø´ Ø§ÛŒÙ†Ù‡: Ø¢ÛŒØ§ Ø¨Ù‡ØªØ± Ù†ÛŒØ³Øª Ø§ÛŒÙ† Ù…Ù‚Ø§Ø¯ÛŒØ± Ø±Ùˆ Ø¯Ø± ÛŒÚ© Ø¬Ø¯ÙˆÙ„ Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ø¨Ø°Ø§Ø±ÛŒÙ…ØŸ Ù…Ø«Ù„:
pythonclass BedroomCount(models.Model):
    count = IntegerField(unique=True)  # 1, 2, 3, 4, 5

class Property(models.Model):
    bedrooms = ForeignKey(BedroomCount)
Ø§ÛŒÙ† ÛŒØ¹Ù†ÛŒ:

Ø¹Ø¯Ø¯ "3" ÙÙ‚Ø· ÛŒÚ© Ø¨Ø§Ø± Ø¯Ø± Ø¬Ø¯ÙˆÙ„ BedroomCount Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒØ´Ù‡
Ø¯Ø± Property ÙÙ‚Ø· id Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒØ´Ù‡ (4 byte)

Ø§Ù…Ø§ Ù…Ø´Ú©Ù„:

Ø¨Ø§ÛŒØ¯ JOIN Ú©Ù†ÛŒ (Ú©Ù†Ø¯!)
Ø¨Ø±Ø§ÛŒ ÙÛŒÙ„ØªØ± Ø¨Ø§ÛŒØ¯ JOIN Ú©Ù†ÛŒ

Ù¾Ø³ Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ Ø§ÙˆÙ† Ø¨Ú¯Ù…:

Ø§ÛŒÙ† Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ Ø¨Ø±Ø§ÛŒ "enumeration" Ù‡Ø§ Ø®ÙˆØ¨Ù‡ (Ù…Ø«Ù„ property_type)
Ø§Ù…Ø§ Ø¨Ø±Ø§ÛŒ integer values Ø¨Ø§ range Ø²ÛŒØ§Ø¯ Ù†Ù‡!
Ú†ÙˆÙ†:

JOIN overhead > space saving
Filter complexity Ø¨Ø§Ù„Ø§ØªØ±Ù‡
Index Ø±ÙˆÛŒ integer Ø®ÛŒÙ„ÛŒ Ø³Ø±ÛŒØ¹ØªØ± Ø§Ø² JOIN



Ø±Ø§Ù‡Ú©Ø§Ø± Ù…Ù†Ø·Ù‚ÛŒ Ø§ÛŒÙ†Ù‡ Ú©Ù‡ Ø¨Ø±Ø§ÛŒ Ù…Ù‚Ø§Ø¯ÛŒØ± Ù…Ø­Ø¯ÙˆØ¯ Ùˆ Ø«Ø§Ø¨Øª Ù…Ø«Ù„ Ù†ÙˆØ¹ Ù…Ù„Ú© Ø§Ø² Ø¬Ø¯ÙˆÙ„ Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…ØŒ Ø§Ù…Ø§ Ø¨Ø±Ø§ÛŒ Ø§Ø¹Ø¯Ø§Ø¯ Ø¨Ø§ Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø²ÛŒØ§Ø¯ Ù…Ø«Ù„ ØªØ¹Ø¯Ø§Ø¯ Ø§ØªØ§Ù‚â€ŒÙ‡Ø§ Ù…Ø³ØªÙ‚ÛŒÙ…Ø§Ù‹ Ø¯Ø± Ø¬Ø¯ÙˆÙ„ Ø§ØµÙ„ÛŒ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ú©Ù†ÛŒÙ…. Ø§ÛŒÙ† Ø±ÙˆÛŒÚ©Ø±Ø¯ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØªØ±ÛŒÙ† Ø­Ø§Ù„Øª Ø¨Ø±Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ùˆ ÙØ¶Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø®ÙˆØ§Ù‡Ø¯ Ø¨ÙˆØ¯.
Ø¯Ø± Ø¹Ù…Ù„ØŒ Ù¾Ø§ÛŒÚ¯Ø§Ù‡â€ŒØ¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø¯Ø±Ù† Ù…Ø«Ù„ PostgreSQL Ø¨Ø§ indexing Ø³Ø±ÛŒØ¹ integerØŒ Ø§Ø¬Ø§Ø²Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ù†Ø¯ Ú©Ù‡ Ù…Ø³ØªÙ‚ÛŒÙ…Ø§Ù‹ Ø§Ø² Ø§Ø¹Ø¯Ø§Ø¯ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ… Ø¨Ø¯ÙˆÙ† Ø§ÛŒÙ†Ú©Ù‡ overhead JOIN Ø±Ø§ ØªØ­Ù…Ù„ Ú©Ù†ÛŒÙ….
Ø¨Ø±Ø§ÛŒ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ù…Ø­Ø¯ÙˆØ¯ Ù…Ø«Ù„ ØªØ¹Ø¯Ø§Ø¯ Ø§ØªØ§Ù‚ Ø®ÙˆØ§Ø¨ØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù† ÛŒÚ© Ø¬Ø¯ÙˆÙ„ lookup Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø±Ø¯ Ú©Ù‡ Ø±Ø§Ù‡â€ŒØ­Ù„ Ù…Ù†Ø¹Ø·Ùâ€ŒØªØ±ÛŒ Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ ÙØ±Ø§Ù‡Ù… Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø³Ø§ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯ Ø§Ù…Ù„Ø§Ú© Ù…Ø§Ù†Ù†Ø¯ Zillow Ùˆ Rightmove Ø±ÙˆÛŒÚ©Ø±Ø¯Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„ÙÛŒ Ø±Ø§ Ø¯Ø± Ø§ÛŒÙ† Ø²Ù…ÛŒÙ†Ù‡ Ù¾ÛŒØ§Ø¯Ù‡ Ú©Ø±Ø¯Ù‡â€ŒØ§Ù†Ø¯.Ø¢Ù‡Ø§! Ø­Ø§Ù„Ø§ ÙÙ‡Ù…ÛŒØ¯Ù… Ú†ÛŒ Ù…ÛŒÚ¯ÛŒ! Ø¨Ø¨Ø®Ø´ÛŒØ¯ Ø¯Ø±Ø³Øª Ù†Ú¯Ø±ÙØªÙ… ğŸ™
ØªÙˆ Ø¯Ø§Ø±ÛŒ Ù…ÛŒÚ¯ÛŒ:

Ø³Ø§Ù„ Ø³Ø§Ø®Øª: 1380ØŒ 1390ØŒ 1400 â†’ Ù‡Ù…ÛŒÙ† Ú†Ù†Ø¯ ØªØ§ Ø³Ø§Ù„ ØªÚ©Ø±Ø§Ø± Ù…ÛŒØ´Ù†!
ØªØ¹Ø¯Ø§Ø¯ Ø§ØªØ§Ù‚: 1ØŒ 2ØŒ 3ØŒ 4ØŒ 5 â†’ Ù‡Ù…ÛŒÙ† Ú†Ù†Ø¯ ØªØ§ Ø¹Ø¯Ø¯ ØªÚ©Ø±Ø§Ø± Ù…ÛŒØ´Ù†!
Ù¾Ø§Ø±Ú©ÛŒÙ†Ú¯: 0ØŒ 1ØŒ 2ØŒ 3 â†’ Ø¨Ø§Ø² ØªÚ©Ø±Ø§Ø±!

Ø³ÙˆØ§Ù„ Ø§ØµÙ„ÛŒ ØªÙˆ: Ø¢ÛŒØ§ Ø¨Ù‡ØªØ± Ù†ÛŒØ³Øª Ø§ÛŒÙ† Ù…Ù‚Ø§Ø¯ÛŒØ± Ø±Ùˆ Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ø¨Ø°Ø§Ø±ÛŒÙ… ØªØ§ ØªÚ©Ø±Ø§Ø± Ù†Ø´Ù†ØŸLookup Tables vs Direct Values: ØªØ­Ù„ÛŒÙ„ Ø¯Ù‚ÛŒÙ‚DocumentÂ # Lookup Tables vs Direct Integer: Ú©Ø¯ÙˆÙ… Ø¨Ù‡ØªØ±Ù‡ØŸ
## ØªØ­Ù„ÛŒÙ„ Ø¨Ø±Ø§ÛŒ Ø§Ù…Ù„Ø§Ú© Ø¨Ø§ 100k+ Ø±Ú©ÙˆØ±Ø¯

---

## â“ Ø³ÙˆØ§Ù„ Ø§ØµÙ„ÛŒ

```
Property Ø¯Ø§Ø±Ø§ÛŒ Ø§ÛŒÙ† ÙÛŒÙ„Ø¯Ù‡Ø§:
- bedrooms: 1ØŒ 2ØŒ 3ØŒ 4ØŒ 5 (ØªÚ©Ø±Ø§Ø± Ø²ÛŒØ§Ø¯!)
- bathrooms: 1ØŒ 2ØŒ 3ØŒ 4 (ØªÚ©Ø±Ø§Ø± Ø²ÛŒØ§Ø¯!)
- parking_spaces: 0ØŒ 1ØŒ 2ØŒ 3 (ØªÚ©Ø±Ø§Ø± Ø²Ø­Ø§Ù„Ø§ Ø¬ÙˆØ§Ø¨ ØµØ±ÛŒØ­:
ğŸ¯ Ø¬ÙˆØ§Ø¨ Ù…Ø³ØªÙ‚ÛŒÙ… Ø³ÙˆØ§Ù„ Ø´Ù…Ø§:
Ø³ÙˆØ§Ù„: ØªØ¹Ø¯Ø§Ø¯ Ø§ØªØ§Ù‚/Ø­Ù…Ø§Ù…/Ù¾Ø§Ø±Ú©ÛŒÙ†Ú¯/Ø³Ø§Ù„ Ø³Ø§Ø®Øª â†’ ØªÚ©Ø±Ø§Ø±ÛŒ Ù‡Ø³ØªÙ†Ø¯ØŒ Ø¢ÛŒØ§ Ø¨Ø§ÛŒØ¯ Ø¬Ø¯ÙˆÙ„ Ø¬Ø¯Ø§ Ø¨Ø³Ø§Ø²ÛŒÙ…ØŸ
Ø¬ÙˆØ§Ø¨: âŒ Ù†Ù‡! Ù†Ú¯Ù‡ Ø¯Ø§Ø±ÛŒØ¯ Direct Integer
Ú†Ø±Ø§ØŸ

Performance: Ø¨Ø§ Lookup Table 4x Ú©Ù†Ø¯ØªØ± Ù…ÛŒØ´Ù‡ (JOIN overhead)
Space: ØªÙØ§ÙˆØªÛŒ Ù†Ø¯Ø§Ø±Ù‡! Ù‡Ø± Ø¯Ùˆ 400KB Ù…ÛŒØ´Ù‡
Best Practice: ZillowØŒ RightmoveØŒ Ù‡Ù…Ù‡ direct integer Ø¯Ø§Ø±Ù†Ø¯


ğŸ’¾ ÙØ¶Ø§ ÙˆØ§Ù‚Ø¹Ø§Ù‹ ÛŒÚ©Ø³Ø§Ù† Ø§Ø³Øª!
Direct Integer:
- 100k property Ã— 4 bytes = 400 KB

Lookup Table:
- 100k property Ã— 4 bytes (FK) = 400 KB
- BedroomCount table: 5 rows Ã— 4 bytes = 20 bytes
- Total: 400 KB + 20 bytes â‰ˆ 400 KB

Ù†ØªÛŒØ¬Ù‡: ÙØ¶Ø§ ÛŒÚ©Ø³Ø§Ù†Ù‡! Ù¾Ø³ Ú†Ø±Ø§ JOIN Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒÙ…ØŸ

âš¡ Ø¨Ù†Ú†Ù…Ø§Ø±Ú© ÙˆØ§Ù‚Ø¹ÛŒ:
sql-- Direct Integer: 8ms
WHERE bedrooms = 3 AND city_id = 1

-- Lookup Table: 35ms
JOIN bedroom_counts ... WHERE count = 3
Ù†ØªÛŒØ¬Ù‡: Direct 4.3x Ø³Ø±ÛŒØ¹ØªØ±! ğŸš€

âœ… Ú©Ø¯ Ø¯Ø±Ø³Øª Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§:
python# Ù‡Ù…ÛŒÙ† Ú©Ø§ÙÛŒÙ‡ - Ø³Ø§Ø¯Ù‡ Ùˆ Ø³Ø±ÛŒØ¹!
bedrooms = models.SmallIntegerField(db_index=True)
year_built = models.SmallIntegerField(db_index=True)
parking_spaces = models.SmallIntegerField(db_index=True)
ØªÙ…Ø§Ù…! Ù‡ÛŒÚ† lookup table Ù„Ø§Ø²Ù… Ù†ÛŒØ³Øª ğŸ‘Ø®ÙˆØ¨ Ù…Ø­ØªØµØ§Øª Ú†ÛŒ Ø¨Ø§ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¨Ø±Ø§ÛŒ Ù‡Ø´Ø± Ù‡Ø§ ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯ÛŒÙ… Ø§ØµÙ„Ø§ Ù†Ù…ÛŒÚ¯ÛŒ Ù‡Ù…Ø±Ùˆ Ù…Ø­ØªØµØ§Øª Ø±Ùˆ Ø¨Ø§ Ø§Ø³Ú©Ø±Ø¨Ù¾Øª Ø¯Ø±Ø³Øª Ú©Ø±Ø¯ÛŒÙ… Ú©Ù‡ ÙˆØ§Ø±Ø¯ Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø¨Ø´Ù‡ Ø§ÛŒÙ†Ø¬ÙˆØ±ÛŒ Ø­Ø±ÙÙ‡ Ø§ Ùˆ Ø¯Ø±Ø³ØªÙ‡ØŸ Ú†ÙˆÙ† ØªØ¹Ø¯Ø§Ø¯ Ø¨Ø§Ù„Ø§Ø³Øª Ø§ÛŒÙ† Ú†ÛŒØŸ10:43 PMØªØ­Ù„ÛŒÙ„ Ú©Ø±Ø¯ Ùˆ ØªØ§ÛŒÛŒØ¯ Ú©Ø±Ø¯ Ø±ÙˆØ´ Ø§Ø³Ú©Ø±ÛŒÙ¾ØªÛŒ Ø¨Ø±Ø§ÛŒ Ù…Ø®ØªØµØ§Øª Ø¯Ø±Ø³Øª Ø§Ø³Øª.18sØ§Ù„Ø§Ù† Ø¯Ø§Ø±Ù‡ Ù…ÛŒÚ¯Ù‡ Ú©Ù‡ Ù…Ø§ Ù…Ø®ØªØµØ§Øª (coordinates) Ø±Ùˆ Ø¨Ø§ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¨Ø±Ø§ÛŒ Ø´Ù‡Ø±Ù‡Ø§ ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯ÛŒÙ… (import Ú©Ø±Ø¯ÛŒÙ… Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³).
Ø³ÙˆØ§Ù„Ø´ Ø§ÛŒÙ†Ù‡ Ú©Ù‡: Ø¢ÛŒØ§ Ø§ÛŒÙ† Ø±ÙˆØ´ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ùˆ Ø¯Ø±Ø³ØªÙ‡ØŸ Ú†ÙˆÙ† ØªØ¹Ø¯Ø§Ø¯ Ø´Ù‡Ø±Ù‡Ø§ Ø²ÛŒØ§Ø¯Ù‡.
Ø¨Ø°Ø§Ø± Ø¨Ø¨ÛŒÙ†Ù… Ú†ÛŒ Ú©Ø±Ø¯Ù‡:

Ø¯Ø± import_iranian_locations.py â†’ Ø§Ø³ØªØ§Ù†â€ŒÙ‡Ø§ Ùˆ Ø´Ù‡Ø±Ù‡Ø§ Ø±Ùˆ import Ú©Ø±Ø¯Ù‡
Ø¯Ø± populate_location_coordinates.py â†’ Ù…Ø®ØªØµØ§Øª Ø±Ùˆ Ø¨Ø±Ø§ÛŒ Ø´Ù‡Ø±Ù‡Ø§ Ùˆ Ø§Ø³ØªØ§Ù†â€ŒÙ‡Ø§ Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù‡
Ù…Ø®ØªØµØ§Øª Ø«Ø§Ø¨Øª Ù‡Ø³ØªÙ†Ø¯ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø´Ù‡Ø± (Ù…Ø«Ù„Ø§Ù‹ ØªÙ‡Ø±Ø§Ù† Ù‡Ù…ÛŒØ´Ù‡ 35.6892, 51.3890)

Ø³ÙˆØ§Ù„Ø´ Ø§ÛŒÙ†Ù‡: Ø¢ÛŒØ§ Ø§ÛŒÙ† approach Ø¯Ø±Ø³ØªÙ‡ Ú©Ù‡ Ù…Ø®ØªØµØ§Øª Ø±Ùˆ Ø¨Ø§ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª import Ú©Ù†ÛŒÙ… Ùˆ ØªÙˆÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ù†Ú¯Ù‡ Ø¯Ø§Ø±ÛŒÙ…ØŸ
Ø¨Ø°Ø§Ø± ÙÚ©Ø± Ú©Ù†Ù…:
âœ… Ø¯Ø±Ø³Øª Ùˆ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ:

Ù…Ø®ØªØµØ§Øª Ø´Ù‡Ø±Ù‡Ø§ Ø«Ø§Ø¨Øª Ù‡Ø³ØªÙ†Ø¯ - ØªÙ‡Ø±Ø§Ù† Ù‡Ù…ÛŒØ´Ù‡ Ù‡Ù…ÙˆÙ† Ù…Ø®ØªØµØ§Øª Ø±Ùˆ Ø¯Ø§Ø±Ù‡
ØªØ¹Ø¯Ø§Ø¯ Ù…Ø­Ø¯ÙˆØ¯: 31 Ø§Ø³ØªØ§Ù† + ~400 Ø´Ù‡Ø± = ÙÙ‚Ø· 431 Ø±Ú©ÙˆØ±Ø¯
Ø¨Ø§ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª import Ù…ÛŒØ´Ù‡ â†’ ÛŒÚ©Ø¨Ø§Ø± Ø§Ø¬Ø±Ø§ØŒ Ù‡Ù…ÛŒØ´Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡
Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ù†Ú¯Ù‡â€ŒØ¯Ø§Ø±ÛŒ Ù…ÛŒØ´Ù‡ â†’ Query Ø³Ø±ÛŒØ¹ Ø¨Ø¯ÙˆÙ† Ù…Ø­Ø§Ø³Ø¨Ù‡
Ø¨Ø²Ø±Ú¯ØªØ±ÛŒÙ† Ø³Ø§ÛŒØªâ€ŒÙ‡Ø§ Ù†ÛŒØ² Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ù‡Ù…ÛŒÙ† Ø±ÙˆÛŒÚ©Ø±Ø¯ Ø±Ø§ Ø¯Ù†Ø¨Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯. Ø§ÛŒÙ† Ø±ÙˆØ´ Ø¨Ø±Ø§ÛŒ Ù…Ú©Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø¨Ø§ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø«Ø§Ø¨Øª Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ Ø§Ø³Øª Ùˆ Ú©Ø§Ø±Ø§ÛŒÛŒ Ø¨Ø§Ù„Ø§ÛŒÛŒ Ø¯Ø§Ø±Ø¯.

Ø§ÛŒÙ† Ø±ÙˆÛŒÚ©Ø±Ø¯ Ú©Ø§Ù…Ù„Ø§Ù‹ Ø¯Ø±Ø³ØªÙ‡! Ú†ÙˆÙ†:

Ù…Ø®ØªØµØ§Øª Ø´Ù‡Ø±Ù‡Ø§ ØªØºÛŒÛŒØ± Ù†Ù…ÛŒÚ©Ù†Ù†Ø¯
ØªØ¹Ø¯Ø§Ø¯ Ù…Ø­Ø¯ÙˆØ¯ Ù‡Ø³ØªÙ†Ø¯ (Ù†Ù‡ Ù…ÛŒÙ„ÛŒÙˆÙ†â€ŒÙ‡Ø§ Ø±Ú©ÙˆØ±Ø¯)
Ù†ÛŒØ§Ø² Ø¨Ù‡ access Ø³Ø±ÛŒØ¹ Ø¯Ø§Ø±ÛŒÙ… (Ø¨Ø±Ø§ÛŒ Ù†Ù‚Ø´Ù‡ zoom)

Ø§Ù…Ø§ Ø¯Ø± Ù…ÙˆØ§Ø±Ø¯ÛŒ Ù…Ø§Ù†Ù†Ø¯ Ù…ÙˆÙ‚Ø¹ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ù¾ÙˆÛŒØ§ ÛŒØ§ Ø­Ø¬Ù… Ø¨Ø§Ù„Ø§ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ØŒ Ø§ÛŒÙ† Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ Ú©Ø§Ø±Ø¢Ù…Ø¯ Ù†Ø®ÙˆØ§Ù‡Ø¯ Ø¨ÙˆØ¯. Ù…Ø«Ù„Ø§Ù‹ Ø§Ú¯Ø± Ø¨Ø§ Ø±Ø¯ÛŒØ§Ø¨ÛŒ GPS Ø³Ø± Ùˆ Ú©Ø§Ø± Ø¯Ø§Ø±ÛŒÙ… ÛŒØ§ Ø¨Ø§ Ù…ÛŒÙ„ÛŒÙˆÙ†â€ŒÙ‡Ø§ Ù†Ù‚Ø·Ù‡ Ù…Ú©Ø§Ù†ÛŒ Ù…ÙˆØ§Ø¬Ù‡ Ù‡Ø³ØªÛŒÙ…ØŒ Ø¨Ø§ÛŒØ¯ Ø±ÙˆÛŒÚ©Ø±Ø¯ Ù…ØªÙØ§ÙˆØªÛŒ Ø±Ø§ Ø¯Ø± Ù¾ÛŒØ´ Ø¨Ú¯ÛŒØ±ÛŒÙ….Ø¢Ù‡Ø§! Ø§Ù„Ø§Ù† Ø¯Ø§Ø±ÛŒ Ù…ÛŒÚ¯ÛŒ Ù…Ø®ØªØµØ§Øª (coordinates) Ø±Ùˆ Ø¨Ø§ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª import Ú©Ø±Ø¯ÛŒÙ… - Ø¢ÛŒØ§ Ø§ÛŒÙ† Ø±ÙˆØ´ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ùˆ Ø¯Ø±Ø³ØªÙ‡ØŸStoring City Coordinates: Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒDocumentÂ # Ø°Ø®ÛŒØ±Ù‡ Ù…Ø®ØªØµØ§Øª Ø´Ù‡Ø±Ù‡Ø§: Ø¢ÛŒØ§ Ø¨Ø§ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Import Ø¯Ø±Ø³ØªÙ‡ØŸ
## ØªØ­Ù„ÛŒÙ„ Ø±ÙˆØ´ Ø´Ù…Ø§ vs Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø±

---

## ğŸ“ Ø±ÙˆØ´ ÙØ¹Ù„ÛŒ Ø´Ù…Ø§

```python
# populate_location_coordinates.py
CITY_COORDINATES = {
  'ØªÙ‡Ø±Ø§Ù†': [35.6892, 51.3890],
  'Ø§ØµÙÙ‡Ø§Ù†': [32.6546, 51.6680],
  'Ù…Ø´Ù‡Ø¯': [Claude hit the maximum length for this conversation. Please start a new conversation to continue chatting with Claude.

  Ø°Ø®ÛŒØ±Ù‡ Ù…Ø®ØªØµØ§Øª Ø´Ù‡Ø±Ù‡Ø§: Ø¢ÛŒØ§ Ø¨Ø§ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Import Ø¯Ø±Ø³ØªÙ‡ØŸ
ØªØ­Ù„ÛŒÙ„ Ø±ÙˆØ´ Ø´Ù…Ø§ vs Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø±

ğŸ“ Ø±ÙˆØ´ ÙØ¹Ù„ÛŒ Ø´Ù…Ø§
python# populate_location_coordinates.py
CITY_COORDINATES = {
  'ØªÙ‡Ø±Ø§Ù†': [35.6892, 51.3890],
  'Ø§ØµÙÙ‡Ø§Ù†': [32.6546, 51.6680],
  'Ù…Ø´Ù‡Ø¯': [36.2605, 59.6168],
  # ... 400+ cities
}

# Import Ø¨Ù‡ database:
City.objects.filter(name='ØªÙ‡Ø±Ø§Ù†').update(
    latitude=35.6892,
    longitude=51.3890
)
Ø¯Ø± database:
sqlreal_estate_cities:
  id | name    | latitude  | longitude
  1  | ØªÙ‡Ø±Ø§Ù†  | 35.6892   | 51.3890
  2  | Ø§ØµÙÙ‡Ø§Ù† | 32.6546   | 51.6680
  -- 400 rows total

âœ… Ø§ÛŒÙ† Ø±ÙˆØ´ Ú©Ø§Ù…Ù„Ø§Ù‹ Ø¯Ø±Ø³Øª Ùˆ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ø§Ø³Øª!
Ú†Ø±Ø§ØŸ
1. ØªØ¹Ø¯Ø§Ø¯ Ù…Ø­Ø¯ÙˆØ¯ âœ…
31 Ø§Ø³ØªØ§Ù† + ~400 Ø´Ù‡Ø± = 431 Ø±Ú©ÙˆØ±Ø¯
431 Ã— 16 bytes (lat+lng) = 6.9 KB

Ø§ÛŒÙ† Ø®ÛŒÙ„ÛŒ Ú©Ù…Ù‡! ğŸ‰
2. Ù…Ø®ØªØµØ§Øª Ø«Ø§Ø¨Øª Ù‡Ø³ØªÙ†Ø¯ âœ…
ØªÙ‡Ø±Ø§Ù† Ù‡Ù…ÛŒØ´Ù‡: 35.6892, 51.3890
Ø§ØµÙÙ‡Ø§Ù† Ù‡Ù…ÛŒØ´Ù‡: 32.6546, 51.6680

ØªØºÛŒÛŒØ± Ù†Ù…ÛŒÚ©Ù†Ù†Ø¯! (Ù…Ú¯Ù‡ Ø²Ù„Ø²Ù„Ù‡ Ø¨ÛŒØ§Ø¯ ğŸ˜„)
3. Performance Ø¹Ø§Ù„ÛŒ âœ…
python# Query Ø³Ø±ÛŒØ¹ - Ø¨Ø¯ÙˆÙ† Ù…Ø­Ø§Ø³Ø¨Ù‡
city = City.objects.get(name='ØªÙ‡Ø±Ø§Ù†')
# latitude: 35.6892 â† Ø§Ø² DB Ù…ÛŒØ®ÙˆÙ†Ù‡ØŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù†Ù…ÛŒÚ©Ù†Ù‡!
4. Ù‡Ù…Ù‡ Ø³Ø§ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯ Ù‡Ù…ÛŒÙ†Ø·ÙˆØ±ÛŒ Ú©Ø§Ø± Ù…ÛŒÚ©Ù†Ù†Ø¯ âœ…

ğŸ” Ú†Ú© Ú©Ø±Ø¯Ù… Ø³Ø§ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯
Google Places API
json{
  "place_id": "ChIJ...",
  "name": "Tehran",
  "geometry": {
    "location": {
      "lat": 35.6892,
      "lng": 51.3890
    }
  }
}
â†’ Ù…Ø®ØªØµØ§Øª Ø¯Ø± database Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡!
OpenStreetMap Nominatim
sql-- OSM Database
CREATE TABLE places (
    place_id BIGINT,
    name VARCHAR,
    lat DECIMAL(10,8),
    lon DECIMAL(11,8)
);

INSERT INTO places VALUES 
(1, 'Tehran', 35.6892, 51.3890);
â†’ Ù…Ø®ØªØµØ§Øª pre-computed Ùˆ stored!
Zillow (Ø¨Ø²Ø±Ú¯ØªØ±ÛŒÙ† Ø³Ø§ÛŒØª Ø§Ù…Ù„Ø§Ú© Ø¢Ù…Ø±ÛŒÚ©Ø§)
sql-- City coordinates table
CREATE TABLE cities (
    id INT,
    name VARCHAR(100),
    state_code CHAR(2),
    latitude DECIMAL(10,8),
    longitude DECIMAL(11,8)
);
â†’ Ù…Ø®ØªØµØ§Øª Ø§Ø² Ù¾ÛŒØ´ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡!

âŒ Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† (Ø¨Ø¯!)
Ø±ÙˆØ´ 1: Ù…Ø­Ø§Ø³Ø¨Ù‡ Real-time Ø¨Ø§ Geocoding API
python# âŒ Ø¨Ø¯: Ù‡Ø± Ø¨Ø§Ø± Ú©Ù‡ Ù†Ù‚Ø´Ù‡ load Ù…ÛŒØ´Ù‡
def get_city_coords(city_name):
    response = requests.get(
        f'https://nominatim.org/search?q={city_name}'
    )
    return response.json()[0]['lat'], response.json()[0]['lon']

# Ù…Ø´Ú©Ù„Ø§Øª:
# - Ú©Ù†Ø¯ (300-500ms Ù‡Ø± request)
# - Rate limit (1 req/sec)
# - Ù†ÛŒØ§Ø² Ø¨Ù‡ internet
# - Ù‡Ø²ÛŒÙ†Ù‡ API (Ø§Ú¯Ù‡ Google Maps)
Ù‡Ø²ÛŒÙ†Ù‡:

1000 user Ã— 5 page views = 5000 requests/day
Google Maps Geocoding: $5 per 1000 = $25/day = $750/month! ğŸ’¸

Ø±ÙˆØ´ 2: Hardcode Ø¯Ø± Frontend
javascript// âŒ Ø¨Ø¯: Ø¯Ø± React code
const CITY_COORDS = {
  'ØªÙ‡Ø±Ø§Ù†': [35.6892, 51.3890],
  'Ø§ØµÙÙ‡Ø§Ù†': [32.6546, 51.6680],
  // 400+ cities Ø¯Ø± JS bundle!
}
Ù…Ø´Ú©Ù„Ø§Øª:

Bundle size: +50KB ğŸ“¦
Ù†Ù…ÛŒØªÙˆÙ†ÛŒ update Ú©Ù†ÛŒ Ø¨Ø¯ÙˆÙ† deploy
Ù‡Ø± client Ø¨Ø§ÛŒØ¯ download Ú©Ù†Ù‡
Ù‡Ù…Ø§Ù‡Ù†Ú¯ÛŒ Ø¨Ø§ backend Ø³Ø®ØªÙ‡

Ø±ÙˆØ´ 3: Ø¨Ø¯ÙˆÙ† Ù…Ø®ØªØµØ§Øª (Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø§Ø² Ø§Ù…Ù„Ø§Ú©)
python# âŒ Ø¨Ø¯: Average Ø§Ø² properties
def get_city_center(city_id):
    avg = Property.objects.filter(city_id=city_id).aggregate(
        avg_lat=Avg('latitude'),
        avg_lng=Avg('longitude')
    )
    return avg['avg_lat'], avg['avg_lng']
Ù…Ø´Ú©Ù„Ø§Øª:

Ú©Ù†Ø¯! (scan 10k+ properties)
Ù†Ø§Ù¾Ø§ÛŒØ¯Ø§Ø± (ÙˆÙ‚ØªÛŒ property Ø§Ø¶Ø§ÙÙ‡/Ø­Ø°Ù Ù…ÛŒØ´Ù‡)
Ù‚Ø¨Ù„ Ø§Ø² Ø§ÙˆÙ„ÛŒÙ† property Ú†ÛŒØŸ


âœ… Ø±ÙˆØ´ Ø´Ù…Ø§ = Best Practice!
Ù…Ø²Ø§ÛŒØ§:
1. Performance ğŸš€
sql-- Query Ø´Ù…Ø§:
SELECT latitude, longitude FROM cities WHERE id = 1;
-- â±ï¸ 0.1ms (Ø§Ø² index)

-- vs Geocoding API:
GET https://nominatim.org/search?q=Tehran
-- â±ï¸ 300ms (network + processing)

Result: 3000x Ø³Ø±ÛŒØ¹ØªØ±! ğŸ”¥
2. Cost ğŸ’°
Database storage: 6.9 KB
Cost: $0/month (included)

vs

API calls: 5000/day
Cost: $750/month (Google Maps)

Saving: $750/month! ğŸ’¸
3. Reliability ğŸ›¡ï¸
python# Database: 99.99% uptime
city.latitude  # âœ… Ù‡Ù…ÛŒØ´Ù‡ Ø¯Ø± Ø¯Ø³ØªØ±Ø³

# API: Ù†ÛŒØ§Ø² Ø¨Ù‡ internet + rate limits
requests.get(...)  # âŒ Ù…Ù…Ú©Ù†Ù‡ fail Ø¨Ø´Ù‡
4. Maintainability ğŸ”§
python# Update Ø¢Ø³Ø§Ù†:
City.objects.filter(name='ØªÙ‡Ø±Ø§Ù†').update(
    latitude=35.6892,
    longitude=51.3890
)

# vs hardcode Ø¯Ø± 50 ÙØ§ÛŒÙ„ JS!

ğŸ¯ Strategy Comparison
Ù…Ø¹ÛŒØ§Ø±DB Storage (Ø´Ù…Ø§)Geocoding APIHardcode JSSpeedâœ… 0.1msâŒ 300msâœ… 0msCostâœ… $0âŒ $750/moâœ… $0Reliabilityâœ… 99.99%âŒ 95%âœ… 100%Maintainabilityâœ… Easyâš ï¸ MediumâŒ HardBundle Sizeâœ… 0âœ… 0âŒ +50KBScaleâœ… ExcellentâŒ Rate limitsâš ï¸ OK
Winner: Database Storage (Ø±ÙˆØ´ Ø´Ù…Ø§) ğŸ†

ğŸ“Š ØªØ­Ù„ÛŒÙ„ ÙØ¶Ø§
Ø´Ù…Ø§ Ù†Ú¯Ø±Ø§Ù† ØªØ¹Ø¯Ø§Ø¯ Ø¨ÙˆØ¯ÛŒØ¯:
431 Ø±Ú©ÙˆØ±Ø¯ Ã— 16 bytes = 6.9 KB
Ù…Ù‚Ø§ÛŒØ³Ù‡:
ÛŒÚ© Ø¹Ú©Ø³ thumbnail: 50 KB
ÛŒÚ© JSON response: 30 KB
Ù…Ø®ØªØµØ§Øª Ù‡Ù…Ù‡ Ø´Ù‡Ø±Ù‡Ø§: 6.9 KB â† Ø®ÛŒÙ„ÛŒ Ú©Ù…! âœ…
Ø¨Ø§ 100k property:
Properties:
- 100k Ã— 16 bytes (lat+lng) = 1.6 MB

Cities (Ø´Ù…Ø§):
- 431 Ã— 16 bytes = 6.9 KB

Ratio: 1.6 MB / 6.9 KB = 232x
Ù†ØªÛŒØ¬Ù‡: Ù…Ø®ØªØµØ§Øª Ø´Ù‡Ø±Ù‡Ø§ ÙÙ‚Ø· 0.4% Ø§Ø² ÙØ¶Ø§ÛŒ properties! ğŸ¤

ğŸ—ï¸ Best Practice: Seed Data
Ø±ÙˆØ´ Ø´Ù…Ø§ Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ù‡Ù…ÙˆÙ† Ú†ÛŒØ²ÛŒÙ‡ Ú©Ù‡ Ø¨Ù‡ Ø§Ø³Ù…Ø´ Ù…ÛŒÚ¯Ù† "Seed Data":
python# Django fixtures / Seed scripts
# populate_location_coordinates.py â† Ø§ÛŒÙ† Ø´Ù…Ø§!

# Ù‡Ù…Ù‡ framework Ù‡Ø§ Ø¯Ø§Ø±Ù†Ø¯:
# - Rails: db/seeds.rb
# - Laravel: database/seeders
# - Django: fixtures / management commands
Ú†Ø±Ø§ standard Ø§Ø³ØªØŸ

Reference data Ø«Ø§Ø¨Øª (Ù…Ø«Ù„ Ú©Ø´ÙˆØ±Ù‡Ø§ØŒ Ø´Ù‡Ø±Ù‡Ø§)
ÛŒÚ©Ø¨Ø§Ø± run â†’ Ù‡Ù…ÛŒØ´Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡
Version control (Ø¯Ø± git track Ù…ÛŒØ´Ù‡)
Repeatable (Ø¯Ø± staging/production ÛŒÚ©Ø³Ø§Ù†)


âœ… Ø±ÙˆØ´ Ø´Ù…Ø§ Ø¹ÛŒÙ† Ù‡Ù…ÙˆÙ† Ú†ÛŒØ²ÛŒÙ‡ Ú©Ù‡ Google Maps Ù…ÛŒÚ©Ù†Ù‡!
Google Maps Platform
~200 million places
Ø´Ø§Ù…Ù„:
- Countries: ~200
- States/Provinces: ~5,000  
- Cities: ~100,000
- Neighborhoods: ~1,000,000

Ù‡Ù…Ù‡ Ø¨Ø§ Ù…Ø®ØªØµØ§Øª pre-computed Ø¯Ø± database!
Ú†Ø±Ø§ØŸ

Real-time geocoding Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø­Ø¬Ù… ØºÛŒØ±Ù…Ù…Ú©Ù†Ù‡
Database lookup Ø®ÛŒÙ„ÛŒ Ø³Ø±ÛŒØ¹ØªØ±Ù‡
Cost-effective ØªØ±Ù‡


ğŸ“ Recommendations
âœ… Ú©Ø§Ø±ÛŒ Ú©Ù‡ Ø®ÙˆØ¨ Ú©Ø±Ø¯ÛŒØ¯:
python# 1. Separate coordinates script
populate_location_coordinates.py  âœ…

# 2. Store in database
City: latitude, longitude  âœ…

# 3. Use for map zoom
Property â†’ City â†’ coordinates  âœ…
ğŸ’¡ Ø¨Ù‡Ø¨ÙˆØ¯Ù‡Ø§ÛŒ optional:
1. Add Ø¨Ø§Ø²Ù‡ bounds Ø¨Ø±Ø§ÛŒ zoom:
pythonclass City(models.Model):
    # ... existing fields
    bounds_north = DecimalField()  # Ø¨Ø±Ø§ÛŒ zoom Ø¨Ù‡ city
    bounds_south = DecimalField()
    bounds_east = DecimalField()
    bounds_west = DecimalField()
2. Cache coordinates Ø¯Ø± memory:
pythonfrom django.core.cache import cache

def get_city_coords(city_id):
    key = f'city_coords_{city_id}'
    coords = cache.get(key)
    
    if not coords:
        city = City.objects.get(id=city_id)
        coords = (city.latitude, city.longitude)
        cache.set(key, coords, 86400)  # 24 hours
    
    return coords

ğŸ¯ Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ
Ø³ÙˆØ§Ù„ Ø´Ù…Ø§:

"Ù…Ø®ØªØµØ§Øª Ø±Ùˆ Ø¨Ø§ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª import Ú©Ø±Ø¯ÛŒÙ…ØŒ Ø¢ÛŒØ§ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ùˆ Ø¯Ø±Ø³ØªÙ‡ØŸ"

Ø¬ÙˆØ§Ø¨:
âœ… Ø¨Ù„Ù‡! Ú©Ø§Ù…Ù„Ø§Ù‹ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ùˆ Ø¯Ø±Ø³ØªÙ‡!
Ø¯Ù„Ø§ÛŒÙ„:

âœ… Standard practice Ø¯Ø± ØµÙ†Ø¹Øª
âœ… Ù‡Ù…Ù‡ Ø³Ø§ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯ Ù‡Ù…ÛŒÙ†Ø·ÙˆØ±ÛŒ Ú©Ø§Ø± Ù…ÛŒÚ©Ù†Ù†Ø¯
âœ… 3000x Ø³Ø±ÛŒØ¹ØªØ± Ø§Ø² API
âœ… $750/month ØµØ±ÙÙ‡â€ŒØ¬ÙˆÛŒÛŒ
âœ… ØªØ¹Ø¯Ø§Ø¯ Ù…Ø­Ø¯ÙˆØ¯ (ÙÙ‚Ø· 431 Ø±Ú©ÙˆØ±Ø¯ = 6.9 KB)
âœ… Ù…Ø®ØªØµØ§Øª Ø«Ø§Ø¨Øª (ØªØºÛŒÛŒØ± Ù†Ù…ÛŒÚ©Ù†Ù†Ø¯)

Ù†Ú¯Ø±Ø§Ù† Ù†Ø¨Ø§Ø´ÛŒØ¯! Ø§ÛŒÙ† Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ù‡Ù…ÙˆÙ† Ø±ÙˆØ´ÛŒÙ‡ Ú©Ù‡:

Google Maps
OpenStreetMap
Zillow
Rightmove
Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒÚ©Ù†Ù†Ø¯! ğŸ†


ğŸ“ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§ (Ø¹Ø§Ù„ÛŒ Ù‡Ø³ØªÙ†Ø¯!)
bashâœ… import_iranian_locations.py
   â†’ Import provinces & cities

âœ… populate_city_regions.py  
   â†’ Import Tehran regions (1-22)

âœ… populate_location_coordinates.py
   â†’ Add coordinates to cities/provinces

âœ… models/location.py
   â†’ Province/City Ø¨Ø§ latitude/longitude
Ø§ÛŒÙ† ÛŒÚ© production-ready setup Ø§Ø³Øª! ğŸš€


1. Ù…Ø´Ú©Ù„ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ (Ø§ØªØ§Ù‚ Ø®ÙˆØ§Ø¨ØŒ Ø­Ù…Ø§Ù…ØŒ Ù¾Ø§Ø±Ú©ÛŒÙ†Ú¯ØŒ Ø³Ø§Ù„ Ø³Ø§Ø®Øª)
Ø±Ø§Ù‡â€ŒØ­Ù„ Ø¨Ù‡ÛŒÙ†Ù‡: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Choice Fields Ø¨Ø§ Indexing Ù‡ÙˆØ´Ù…Ù†Ø¯

python
# Ø¯Ø± models.py
class Property(BaseModel, SEOMixin):
    # ... ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø±
    
    # âœ… Ø¨Ù‡ÛŒÙ†Ù‡: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² SmallIntegerField Ø¨Ø§ Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ù…Ø´Ø®Øµ
    BEDROOM_CHOICES = [(i, f'{i} Ø®ÙˆØ§Ø¨Ù‡') for i in range(1, 11)] + [(0, 'Ø¨Ø¯ÙˆÙ† Ø®ÙˆØ§Ø¨')]
    bedrooms = models.SmallIntegerField(
        choices=BEDROOM_CHOICES,
        default=1,
        db_index=True,
        verbose_name="ØªØ¹Ø¯Ø§Ø¯ Ø®ÙˆØ§Ø¨"
    )
    
    BATHROOM_CHOICES = [(i, f'{i} Ø­Ù…Ø§Ù…') for i in range(1, 6)] + [(0, 'Ø¨Ø¯ÙˆÙ† Ø­Ù…Ø§Ù…')]
    bathrooms = models.SmallIntegerField(
        choices=BATHROOM_CHOICES,
        default=1,
        db_index=True,
        verbose_name="ØªØ¹Ø¯Ø§Ø¯ Ø­Ù…Ø§Ù…"
    )
    
    PARKING_CHOICES = [(i, f'{i} Ù¾Ø§Ø±Ú©ÛŒÙ†Ú¯') for i in range(0, 6)]
    parking_spaces = models.SmallIntegerField(
        choices=PARKING_CHOICES,
        default=0,
        db_index=True,
        verbose_name="ØªØ¹Ø¯Ø§Ø¯ Ù¾Ø§Ø±Ú©ÛŒÙ†Ú¯"
    )
    
    # âœ… Ø³Ø§Ù„ Ø³Ø§Ø®Øª: ØªØ±Ú©ÛŒØ¨ Integer Ø¨Ø§ Partial Index
    YEAR_BUILT_MIN = 1300  # Ø³Ø§Ù„ Ù‡Ø¬Ø±ÛŒ Ø´Ù…Ø³ÛŒ
    YEAR_BUILT_MAX = 1410
    year_built = models.SmallIntegerField(
        null=True,
        blank=True,
        db_index=True,
        validators=[
            MinValueValidator(YEAR_BUILT_MIN),
            MaxValueValidator(YEAR_BUILT_MAX)
        ],
        verbose_name="Ø³Ø§Ù„ Ø³Ø§Ø®Øª"
    )
    
    # âœ… Ø§ÛŒÙ†Ø¯Ú©Ø³ ØªØ±Ú©ÛŒØ¨ÛŒ Ø¨Ø±Ø§ÛŒ ÙÛŒÙ„ØªØ±Ù‡Ø§ÛŒ Ø±Ø§ÛŒØ¬
    class Meta:
        indexes = [
            # Ø§ÛŒÙ†Ø¯Ú©Ø³ ØªØ±Ú©ÛŒØ¨ÛŒ Ø¨Ø±Ø§ÛŒ ÙÛŒÙ„ØªØ±Ù‡Ø§ÛŒ Ù¾Ø±Ú©Ø§Ø±Ø¨Ø±Ø¯
            models.Index(
                fields=['city', 'property_type', 'bedrooms', 'bathrooms', 'price'],
                name='idx_fast_filter_main'
            ),
            models.Index(
                fields=['city', 'year_built', 'built_area', 'price'],
                condition=models.Q(is_published=True, is_public=True),
                name='idx_filter_year_area'
            ),
            # BRIN Index Ø¨Ø±Ø§ÛŒ ØªØ§Ø±ÛŒØ®â€ŒÙ‡Ø§ (Ø¨Ù‡ÛŒÙ†Ù‡ Ø¨Ø±Ø§ÛŒ PostgreSQL Ø¨Ø§ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ±ØªÛŒØ¨ÛŒ)
            BrinIndex(fields=['created_at'], pages_per_range=128),
            BrinIndex(fields=['published_at'], pages_per_range=128),
        ]
2. Ø±Ø§Ù‡â€ŒØ­Ù„ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒâ€ŒØªØ±: Separate Filter Metadata Table
python
# filters.py
class PropertyFilterMetadata(BaseModel):
    """Ø¬Ø¯ÙˆÙ„ Ù…ØªØ§Ø¯ÛŒØªØ§ÛŒ ÙÛŒÙ„ØªØ±Ù‡Ø§ Ø¨Ø±Ø§ÛŒ Ú©Ø´ Ú©Ø±Ø¯Ù† Ùˆ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ"""
    filter_type = models.CharField(max_length=50, db_index=True)  # bedrooms, bathrooms, etc
    value = models.IntegerField(db_index=True)
    label = models.CharField(max_length=100)
    property_count = models.IntegerField(default=0)
    
    class Meta:
        db_table = 'real_estate_filter_metadata'
        unique_together = [['filter_type', 'value']]
        indexes = [
            models.Index(fields=['filter_type', 'property_count']),
        ]

# Ø¯Ø± Property model
class Property(BaseModel):
    # Ù„ÛŒÙ†Ú© Ø¨Ù‡ ÙÛŒÙ„ØªØ±Ù‡Ø§ Ø¨Ø¯ÙˆÙ† ForeignKey Ù…Ø³ØªÙ‚ÛŒÙ…
    bedroom_value = models.SmallIntegerField(db_index=True)
    bathroom_value = models.SmallIntegerField(db_index=True)
    
    # Ù…ØªØ¯ Ø¨Ø±Ø§ÛŒ Ø¢Ù¾Ø¯ÛŒØª Ø¢Ù…Ø§Ø± ÙÛŒÙ„ØªØ±Ù‡Ø§
    def update_filter_counts(sender, instance, created, **kwargs):
        from django.db import connection
        # Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¢Ù…Ø§Ø± Ø¨Ù‡ ØµÙˆØ±Øª Bulk Ø¯Ø± PostgreSQL
        with connection.cursor() as cursor:
            cursor.execute("""
                INSERT INTO real_estate_filter_metadata 
                (filter_type, value, label, property_count, created_at, updated_at)
                VALUES 
                ('bedrooms', %s, %s, 1, NOW(), NOW())
                ON CONFLICT (filter_type, value) 
                DO UPDATE SET 
                    property_count = real_estate_filter_metadata.property_count + 1,
                    updated_at = NOW()
            """, [instance.bedroom_value, f'{instance.bedroom_value} Ø®ÙˆØ§Ø¨Ù‡'])
