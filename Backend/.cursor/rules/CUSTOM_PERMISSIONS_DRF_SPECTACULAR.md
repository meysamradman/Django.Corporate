# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Permission Classes Ø³ÙØ§Ø±Ø´ÛŒ Ø¨Ø§ DRF Spectacular (2025)

## ğŸ“‹ Ø®Ù„Ø§ØµÙ‡

Ø§ÛŒÙ† Ø¯Ø§Ú©ÛŒÙˆÙ…Ù†Øª Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ú©Ù‡ Ø¢ÛŒØ§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² **Permission Classes Ø³ÙØ§Ø±Ø´ÛŒ** Ø¯Ø± Django REST Framework Ø¯Ø± Ø³Ø§Ù„ 2025 Ø¯Ø±Ø³Øª Ø§Ø³Øª Ùˆ Ø¢ÛŒØ§ Ø¨Ø§ **drf-spectacular** (Ø¨Ø±Ø§ÛŒ ØªÙˆÙ„ÛŒØ¯ Schema Ùˆ Ù…Ø³ØªÙ†Ø¯Ø§Øª API) Ù…Ø´Ú©Ù„ Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ ÛŒØ§ Ù†Ù‡.

---

## âœ… Ù†ØªÛŒØ¬Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ú©Ù„ÛŒ

**Ø¨Ù„Ù‡ØŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Permission Classes Ø³ÙØ§Ø±Ø´ÛŒ Ø¯Ø± 2025 Ú©Ø§Ù…Ù„Ø§Ù‹ Ø¯Ø±Ø³Øª Ùˆ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ Ø§Ø³Øª!**

- âœ… **Ø±ÙˆØ´ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯**: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Permission Classes Ø³ÙØ§Ø±Ø´ÛŒ ÛŒÚ© Ø±ÙˆØ´ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ Ùˆ ØªÙˆØµÛŒÙ‡â€ŒØ´Ø¯Ù‡ Ø¯Ø± Django REST Framework Ø§Ø³Øª
- âœ… **Ø³Ø§Ø²Ú¯Ø§Ø± Ø¨Ø§ drf-spectacular**: drf-spectacular Ø§Ø² Ù†Ø³Ø®Ù‡ 0.29.0 Ø¨Ù‡ Ø¨Ø¹Ø¯ Ø¨Ù‡ Ø®ÙˆØ¨ÛŒ Ø¨Ø§ Permission Classes Ø³ÙØ§Ø±Ø´ÛŒ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯
- âœ… **Ø¨Ø¯ÙˆÙ† Ù…Ø´Ú©Ù„**: Ø§Ú¯Ø± Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´ÙˆØ¯ØŒ Ù…Ø´Ú©Ù„ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯

---

## ğŸ” Ø¨Ø±Ø±Ø³ÛŒ Ø¬Ø²Ø¦ÛŒØ§Øª

### 1. Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Permission Classes Ø³ÙØ§Ø±Ø´ÛŒ

#### âœ… Ø¯Ø±Ø³Øª Ø§Ø³ØªØŸ
**Ø¨Ù„Ù‡ØŒ Ú©Ø§Ù…Ù„Ø§Ù‹ Ø¯Ø±Ø³Øª Ø§Ø³Øª!**

Django REST Framework Ø§Ø² Ø§Ø¨ØªØ¯Ø§ Ø§Ø² Permission Classes Ø³ÙØ§Ø±Ø´ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø§ÛŒÙ† ÛŒÚ© ÙˆÛŒÚ˜Ú¯ÛŒ Ø§ØµÙ„ÛŒ Ùˆ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ DRF Ø§Ø³Øª.

#### Ù…Ø«Ø§Ù„ Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡ Ù…Ø§:
```python
# Backend/src/portfolio/views/admin/portfolio_views.py

class PortfolioAdminViewSet(viewsets.ModelViewSet):
    permission_classes = [lambda: RequireModuleAccess('portfolio')]
    ...
```

Ø§ÛŒÙ† Ú©Ø¯ Ú©Ø§Ù…Ù„Ø§Ù‹ Ø¯Ø±Ø³Øª Ùˆ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ Ø§Ø³Øª.

---

### 2. Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Lambda Ø¯Ø± permission_classes

#### âš ï¸ Ù†Ú©ØªÙ‡ Ù…Ù‡Ù…:
Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² `lambda` Ø¯Ø± `permission_classes` ÛŒÚ© **workaround** Ø§Ø³Øª Ø²Ù…Ø§Ù†ÛŒ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒÙ… Ù¾Ø§Ø±Ø§Ù…ØªØ± Ø¨Ù‡ Permission Class Ù¾Ø§Ø³ Ø¨Ø¯Ù‡ÛŒÙ….

#### âœ… Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ø¯Ø±Ø³Øª:

**Ø±ÙˆØ´ 1: Instance Ù…Ø³ØªÙ‚ÛŒÙ… (Ø¨Ù‡ØªØ±ÛŒÙ† Ø¨Ø±Ø§ÛŒ Schema)**
```python
# Ø¯Ø± Ø¨Ø§Ù„Ø§ÛŒ ÙØ§ÛŒÙ„ (Ø®Ø§Ø±Ø¬ Ø§Ø² Ú©Ù„Ø§Ø³)
portfolio_permission = RequireModuleAccess('portfolio')

class PortfolioAdminViewSet(viewsets.ModelViewSet):
    permission_classes = [portfolio_permission]
```

**Ø±ÙˆØ´ 2: Lambda (Ø¨Ø±Ø§ÛŒ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ø¯ÛŒÙ†Ø§Ù…ÛŒÚ©)**
```python
# ÙˆÙ‚ØªÛŒ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù¾Ø§Ø±Ø§Ù…ØªØ± Ø¯ÛŒÙ†Ø§Ù…ÛŒÚ© Ø¯Ø§Ø±ÛŒÙ…
class PortfolioAdminViewSet(viewsets.ModelViewSet):
    permission_classes = [lambda: RequireModuleAccess('portfolio')]
```

**Ø±ÙˆØ´ 3: Class Ø¨Ø§ __init__ Ù¾ÛŒØ´â€ŒÙØ±Ø¶**
```python
# ØªØ¹Ø±ÛŒÙ Permission Class Ø¨Ø§ Ù…Ù‚Ø§Ø¯ÛŒØ± Ù¾ÛŒØ´â€ŒÙØ±Ø¶
class PortfolioPermission(RequireModuleAccess):
    def __init__(self):
        super().__init__('portfolio')

# Ø§Ø³ØªÙØ§Ø¯Ù‡
class PortfolioAdminViewSet(viewsets.ModelViewSet):
    permission_classes = [PortfolioPermission]  # Ø¨Ø¯ÙˆÙ† Ù¾Ø±Ø§Ù†ØªØ²
```

#### âŒ Ø±ÙˆØ´ Ø§Ø´ØªØ¨Ø§Ù‡:
```python
# âŒ Ú©Ù„Ø§Ø³ Ø¨Ø¯ÙˆÙ† instantiate Ú©Ø±Ø¯Ù†
permission_classes = [RequireModuleAccess]  # Ù†Ø§Ø¯Ø±Ø³Øª

# âŒ ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ Ø¯Ø± Ù„ÛŒØ³Øª (Ø¨Ø§Ø¹Ø« Ø§ÛŒØ¬Ø§Ø¯ instance Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ø§Ù…Ø§ Ù…Ù†Ø§Ø³Ø¨ Ù†ÛŒØ³Øª)
permission_classes = [RequireModuleAccess('portfolio')()]  # Ú¯ÛŒØ¬â€ŒÚ©Ù†Ù†Ø¯Ù‡
```

#### ğŸ’¡ ØªÙˆØµÛŒÙ‡:
Ø¨Ø±Ø§ÛŒ Ø¨Ù‡ØªØ±ÛŒÙ† Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ Ø¨Ø§ drf-spectacularØŒ Ø§Ø² **Ø±ÙˆØ´ 1** (instance Ù…Ø³ØªÙ‚ÛŒÙ…) Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.

---

### 3. Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ Ø¨Ø§ drf-spectacular

#### âœ… Ø³Ø§Ø²Ú¯Ø§Ø± Ø§Ø³ØªØŸ
**Ø¨Ù„Ù‡ØŒ drf-spectacular Ø§Ø² Ù†Ø³Ø®Ù‡ 0.29.0 Ø¨Ù‡ Ø¨Ø¹Ø¯ Ø¨Ù‡ Ø®ÙˆØ¨ÛŒ Ø¨Ø§ Permission Classes Ø³ÙØ§Ø±Ø´ÛŒ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯.**

#### Ø¨Ø±Ø±Ø³ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡ Ù…Ø§:
```python
# Backend/requirements.txt
drf-spectacular==0.29.0  # âœ… Ù†Ø³Ø®Ù‡ Ø¨Ù‡â€ŒØ±ÙˆØ²

# Backend/config/django/base.py
REST_FRAMEWORK = {
    'DEFAULT_SCHEMA_CLASS': 'drf_spectacular.openapi.AutoSchema',  # âœ… ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯Ù‡
    ...
}

# Backend/config/urls.py
path('api/schema/', SpectacularAPIView.as_view(), name='schema'),
path('api/schema/swagger-ui/', SpectacularSwaggerView.as_view(url_name='schema'), name='swagger-ui'),
```

**Ù‡Ù…Ù‡ Ú†ÛŒØ² Ø¯Ø±Ø³Øª ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯Ù‡ Ø§Ø³Øª!**

---

## ğŸ¯ Ú†Ø·ÙˆØ± drf-spectacular Permission Classes Ø±Ø§ ØªØ´Ø®ÛŒØµ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ØŸ

### Ø±ÙˆØ´ 1: ØªØ´Ø®ÛŒØµ Ø®ÙˆØ¯Ú©Ø§Ø±
drf-spectacular Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Permission Classes Ø±Ø§ Ø§Ø² `permission_classes` Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ùˆ Ø¯Ø± Schema Ù†Ù…Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.

### Ø±ÙˆØ´ 2: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² extend_schema (Ø¨Ø±Ø§ÛŒ Ú©Ù†ØªØ±Ù„ Ø¨ÛŒØ´ØªØ±)
Ø§Ú¯Ø± Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ú©Ù†ØªØ±Ù„ Ø¨ÛŒØ´ØªØ±ÛŒ Ø±ÙˆÛŒ Schema Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯:

```python
from drf_spectacular.utils import extend_schema, OpenApiResponse

class PortfolioAdminViewSet(viewsets.ModelViewSet):
    permission_classes = [lambda: RequireModuleAccess('portfolio')]
    
    @extend_schema(
        summary="Ù„ÛŒØ³Øª Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ©Ø§Ø±Ù‡Ø§",
        description="Ø§ÛŒÙ† API Ù„ÛŒØ³Øª Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ©Ø§Ø±Ù‡Ø§ Ø±Ø§ Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø§Ù†Ø¯. Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù…Ø§Ú˜ÙˆÙ„ portfolio Ø¯Ø§Ø±Ø¯.",
        responses={
            200: OpenApiResponse(description="Success"),
            403: OpenApiResponse(description="Permission denied - Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù…Ø§Ú˜ÙˆÙ„ portfolio"),
        },
        tags=['Portfolio'],
    )
    def list(self, request, *args, **kwargs):
        ...
```

---

## âš ï¸ Ù…Ø´Ú©Ù„Ø§Øª Ø§Ø­ØªÙ…Ø§Ù„ÛŒ Ùˆ Ø±Ø§Ù‡ Ø­Ù„

### Ù…Ø´Ú©Ù„ 1: Lambda Ø¯Ø± Schema Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯

#### Ù…Ø´Ú©Ù„:
```python
permission_classes = [lambda: RequireModuleAccess('portfolio')]
```

ÙˆÙ‚ØªÛŒ Ø§Ø² lambda Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…ØŒ drf-spectacular Ù…Ù…Ú©Ù† Ø§Ø³Øª Ù†ØªÙˆØ§Ù†Ø¯ Ù†Ø§Ù… Permission Class Ø±Ø§ ØªØ´Ø®ÛŒØµ Ø¯Ù‡Ø¯ Ùˆ Ø¨Ù‡ Ø¬Ø§ÛŒ Ø¢Ù† `<lambda>` Ù†Ù…Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.

#### Ø±Ø§Ù‡ Ø­Ù„ 1: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² instance Ù…Ø³ØªÙ‚ÛŒÙ… (Ø¨Ù‡ØªØ±ÛŒÙ†)
```python
# Ø¯Ø± Ø¨Ø§Ù„Ø§ÛŒ ÙØ§ÛŒÙ„
portfolio_permission = RequireModuleAccess('portfolio')

class PortfolioAdminViewSet(viewsets.ModelViewSet):
    permission_classes = [portfolio_permission]  # âœ… Schema ÙˆØ§Ø¶Ø­
```

#### Ø±Ø§Ù‡ Ø­Ù„ 2: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² extend_schema
```python
from drf_spectacular.utils import extend_schema, OpenApiResponse

class PortfolioAdminViewSet(viewsets.ModelViewSet):
    permission_classes = [lambda: RequireModuleAccess('portfolio')]
    
    @extend_schema(
        summary="Ù„ÛŒØ³Øª Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ©Ø§Ø±Ù‡Ø§",
        description="Ø¯Ø³ØªØ±Ø³ÛŒ: Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù…Ø§Ú˜ÙˆÙ„ portfolio",
        responses={
            403: OpenApiResponse(description="Permission denied"),
        }
    )
    def list(self, request, *args, **kwargs):
        ...
```

#### Ø±Ø§Ù‡ Ø­Ù„ 3: Permission Class Ø§Ø®ØªØµØ§ØµÛŒ
```python
# ØªØ¹Ø±ÛŒÙ Ú©Ù„Ø§Ø³ Ø¬Ø¯ÛŒØ¯
class PortfolioPermission(RequireModuleAccess):
    """Permission Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Portfolio"""
    def __init__(self):
        super().__init__('portfolio')

# Ø§Ø³ØªÙØ§Ø¯Ù‡
class PortfolioAdminViewSet(viewsets.ModelViewSet):
    permission_classes = [PortfolioPermission]  # âœ… Ù†Ø§Ù… ÙˆØ§Ø¶Ø­ Ø¯Ø± Schema
```

---

### Ù…Ø´Ú©Ù„ 2: Permission Class Ø¯Ø± Swagger UI Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯

#### Ø¨Ø±Ø±Ø³ÛŒ:
1. Ø¨Ù‡ `/api/schema/swagger-ui/` Ø¨Ø±ÙˆÛŒØ¯
2. ÛŒÚ© endpoint Ø±Ø§ Ø¨Ø§Ø² Ú©Ù†ÛŒØ¯
3. Ø¯Ù†Ø¨Ø§Ù„ Ø¨Ø®Ø´ "Authorization" ÛŒØ§ Ù‚ÙÙ„ ğŸ”’ Ø¯Ø± Ú©Ù†Ø§Ø± endpoint Ø¨Ú¯Ø±Ø¯ÛŒØ¯

#### Ø§Ú¯Ø± Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯:

**Ø±Ø§Ù‡ Ø­Ù„ 1: ØªÙ†Ø¸ÛŒÙ…Ø§Øª SPECTACULAR_SETTINGS**
```python
# Backend/config/django/base.py

SPECTACULAR_SETTINGS = {
    'TITLE': 'Corporate API',
    'DESCRIPTION': 'API Documentation for Corporate Admin Panel',
    'VERSION': '1.0.0',
    'SERVE_INCLUDE_SCHEMA': True,
    'COMPONENT_SPLIT_REQUEST': True,
    'SCHEMA_PATH_PREFIX': '/api/',
    
    # Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† security scheme
    'APPEND_COMPONENTS': {
        'securitySchemes': {
            'cookieAuth': {
                'type': 'apiKey',
                'in': 'cookie',
                'name': 'sessionid',
                'description': 'Session authentication via Django cookies'
            },
            'tokenAuth': {
                'type': 'http',
                'scheme': 'bearer',
                'bearerFormat': 'Token',
                'description': 'Token-based authentication'
            }
        }
    },
    
    # ØªØ¹Ø±ÛŒÙ security Ù¾ÛŒØ´â€ŒÙØ±Ø¶
    'SECURITY': [
        {'cookieAuth': []},
        {'tokenAuth': []}
    ],
    
    # ØªÙ†Ø¸ÛŒÙ…Ø§Øª Swagger UI
    'SWAGGER_UI_SETTINGS': {
        'deepLinking': True,
        'persistAuthorization': True,
        'displayOperationId': True,
        'defaultModelsExpandDepth': 2,
        'defaultModelExpandDepth': 2,
        'filter': True,
    },
}
```

**Ø±Ø§Ù‡ Ø­Ù„ 2: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² extend_schema Ø¨Ø§ security**
```python
from drf_spectacular.utils import extend_schema, OpenApiResponse

class PortfolioAdminViewSet(viewsets.ModelViewSet):
    permission_classes = [lambda: RequireModuleAccess('portfolio')]
    
    @extend_schema(
        summary="Ù„ÛŒØ³Øª Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ©Ø§Ø±Ù‡Ø§",
        description="Ø§ÛŒÙ† API Ù„ÛŒØ³Øª Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ©Ø§Ø±Ù‡Ø§ Ø±Ø§ Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø§Ù†Ø¯.",
        responses={
            200: OpenApiResponse(description="Ù„ÛŒØ³Øª Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ©Ø§Ø±Ù‡Ø§"),
            401: OpenApiResponse(description="Unauthenticated - Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù„Ø§Ú¯ÛŒÙ†"),
            403: OpenApiResponse(description="Permission denied - Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø§Ú˜ÙˆÙ„ portfolio"),
        },
        # Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† ØªÙˆØ¶ÛŒØ­Ø§Øª security
        auth=['cookieAuth', 'tokenAuth'],
    )
    def list(self, request, *args, **kwargs):
        ...
```

---

### Ù…Ø´Ú©Ù„ 3: Permission Class Ø³ÙØ§Ø±Ø´ÛŒ Ø¯Ø± Schema Ù†Ø§Ù…Ø´Ø®Øµ Ø§Ø³Øª

#### Ù…Ø´Ú©Ù„:
Ø¯Ø± Schema Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø¨Ù‡ Ø¬Ø§ÛŒ Ù†Ø§Ù… Permission ClassØŒ ÙÙ‚Ø· `BasePermission` ÛŒØ§ `<lambda>` Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆØ¯.

#### Ø±Ø§Ù‡ Ø­Ù„: Ø¨Ù‡Ø¨ÙˆØ¯ Permission Class

```python
class RequireModuleAccess(AdminRolePermission):
    """
    Permission class Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ø®Ø§Øµ.
    
    Ø§ÛŒÙ† Permission Class Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ú©Ù‡ Ø¢ÛŒØ§ Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ 
    Ù…Ø´Ø®Øµ Ø´Ø¯Ù‡ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø±Ø¯ ÛŒØ§ Ù†Ù‡.
    
    Args:
        *required_modules: Ù†Ø§Ù… Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² (Ù…Ø«Ù„ 'portfolio', 'blog')
    
    Example:
        >>> portfolio_perm = RequireModuleAccess('portfolio')
        >>> class MyViewSet(viewsets.ModelViewSet):
        ...     permission_classes = [portfolio_perm]
    """
    
    def __init__(self, *required_modules):
        self.required_modules = list(required_modules)
        super().__init__()
    
    def __repr__(self):
        """Ù†Ù…Ø§ÛŒØ´ Ø¨Ù‡ØªØ± Ø¯Ø± debugging Ùˆ Schema"""
        modules_str = ', '.join(self.required_modules)
        return f"RequireModuleAccess({modules_str})"
    
    def __str__(self):
        """Ù†Ù…Ø§ÛŒØ´ string"""
        return self.__repr__()
    
    @property
    def __name__(self):
        """Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø± drf-spectacular"""
        if self.required_modules:
            return f"RequireModuleAccess[{','.join(self.required_modules)}]"
        return "RequireModuleAccess"
```

---

## ğŸ“ Ø¨Ù‡ØªØ±ÛŒÙ† Ø±ÙˆØ´â€ŒÙ‡Ø§ (Best Practices)

### âœ… 1. Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² instance Ù…Ø³ØªÙ‚ÛŒÙ… (ØªÙˆØµÛŒÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯)

```python
# âœ… Ø¨Ù‡ØªØ±ÛŒÙ† Ø±ÙˆØ´ - Ø®ÙˆØ§Ù†Ø§ Ùˆ Schema ÙˆØ§Ø¶Ø­
portfolio_permission = RequireModuleAccess('portfolio')

class PortfolioAdminViewSet(viewsets.ModelViewSet):
    """ViewSet Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ©Ø§Ø±Ù‡Ø§"""
    permission_classes = [portfolio_permission]
    queryset = Portfolio.objects.all()
    serializer_class = PortfolioSerializer

# Ù…Ø²Ø§ÛŒØ§:
# - Ø®ÙˆØ§Ù†Ø§ÛŒÛŒ Ø¨Ø§Ù„Ø§
# - Schema ÙˆØ§Ø¶Ø­ Ø¯Ø± Swagger
# - Ù‚Ø§Ø¨Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…Ø¬Ø¯Ø¯
# - IDE autocomplete Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯
```

### âœ… 2. Ù…Ø³ØªÙ†Ø¯Ø³Ø§Ø²ÛŒ Ú©Ø§Ù…Ù„ Permission Classes

```python
class RequireModuleAccess(AdminRolePermission):
    """
    Permission class Ø¨Ø±Ø§ÛŒ Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…Ø§Ú˜ÙˆÙ„.
    
    Ø§ÛŒÙ† Ú©Ù„Ø§Ø³ Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ú©Ù‡ Ø¢ÛŒØ§ Ú©Ø§Ø±Ø¨Ø± Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø´Ø¯Ù‡ Ø¨Ù‡ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ 
    Ù…Ø´Ø®Øµ Ø´Ø¯Ù‡ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø±Ø¯ ÛŒØ§ Ù†Ù‡. Ø¯Ø³ØªØ±Ø³ÛŒâ€ŒÙ‡Ø§ Ø§Ø² Ø·Ø±ÛŒÙ‚ Roleâ€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø± 
    Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ ØªØ¹ÛŒÛŒÙ† Ù…ÛŒâ€ŒØ´ÙˆØ¯.
    
    Attributes:
        required_modules (list): Ù„ÛŒØ³Øª Ù†Ø§Ù… Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø²
    
    Args:
        *required_modules (str): Ù†Ø§Ù… Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø²
            Ù…Ø«Ø§Ù„: 'portfolio', 'blog', 'analytics'
    
    Returns:
        bool: True Ø§Ú¯Ø± Ú©Ø§Ø±Ø¨Ø± Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ØŒ False Ø¯Ø± ØºÛŒØ± Ø§ÛŒÙ† ØµÙˆØ±Øª
    
    Example:
        >>> # Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø³Ø§Ø¯Ù‡
        >>> portfolio_perm = RequireModuleAccess('portfolio')
        >>> 
        >>> class PortfolioViewSet(viewsets.ModelViewSet):
        ...     permission_classes = [portfolio_perm]
        ...     queryset = Portfolio.objects.all()
        ...     serializer_class = PortfolioSerializer
        >>> 
        >>> # Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ú†Ù†Ø¯ Ù…Ø§Ú˜ÙˆÙ„
        >>> multi_perm = RequireModuleAccess('portfolio', 'blog')
    
    Notes:
        - Super admin Ù‡Ù…ÛŒØ´Ù‡ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø±Ø¯
        - Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ÛŒØ¯ Ø­Ø¯Ø§Ù‚Ù„ ÛŒÚ© role ÙØ¹Ø§Ù„ Ø¨Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù…Ø§Ú˜ÙˆÙ„ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯
        - Ù†ØªØ§ÛŒØ¬ Ø¨Ø±Ø§ÛŒ 5 Ø¯Ù‚ÛŒÙ‚Ù‡ cache Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯
    """
    
    def __init__(self, *required_modules):
        if not required_modules:
            raise ValueError("Ø­Ø¯Ø§Ù‚Ù„ ÛŒÚ© Ù…Ø§Ú˜ÙˆÙ„ Ø¨Ø§ÛŒØ¯ Ù…Ø´Ø®Øµ Ø´ÙˆØ¯")
        self.required_modules = list(required_modules)
        super().__init__()
```

### âœ… 3. Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² extend_schema Ø¨Ø±Ø§ÛŒ Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø¯Ù‚ÛŒÙ‚â€ŒØªØ±

```python
from drf_spectacular.utils import extend_schema, OpenApiResponse, OpenApiParameter
from drf_spectacular.types import OpenApiTypes

class PortfolioAdminViewSet(viewsets.ModelViewSet):
    permission_classes = [portfolio_permission]
    
    @extend_schema(
        summary="Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ©Ø§Ø±Ù‡Ø§",
        description="""
        Ø§ÛŒÙ† endpoint Ù„ÛŒØ³Øª Ú©Ø§Ù…Ù„ Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ©Ø§Ø±Ù‡Ø§ Ø±Ø§ Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø§Ù†Ø¯.
        
        **Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ:**
        - Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ÛŒØ¯ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯
        - Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù…Ø§Ú˜ÙˆÙ„ 'portfolio' Ø¶Ø±ÙˆØ±ÛŒ Ø§Ø³Øª
        - Ø¨Ø±Ø§ÛŒ super admin Ù…Ø­Ø¯ÙˆØ¯ÛŒØªÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯
        """,
        parameters=[
            OpenApiParameter(
                name='status',
                type=OpenApiTypes.STR,
                location=OpenApiParameter.QUERY,
                description='ÙÛŒÙ„ØªØ± Ø¨Ø± Ø§Ø³Ø§Ø³ ÙˆØ¶Ø¹ÛŒØª (published, draft)',
                enum=['published', 'draft'],
                required=False
            ),
        ],
        responses={
            200: OpenApiResponse(
                description="Ù„ÛŒØ³Øª Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ©Ø§Ø±Ù‡Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯"
            ),
            401: OpenApiResponse(
                description="Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ù†Ø´Ø¯Ù‡ - Ø§Ø¨ØªØ¯Ø§ Ù„Ø§Ú¯ÛŒÙ† Ú©Ù†ÛŒØ¯"
            ),
            403: OpenApiResponse(
                description="Ø¯Ø³ØªØ±Ø³ÛŒ Ø±Ø¯ Ø´Ø¯ - Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø§Ú˜ÙˆÙ„ portfolio"
            ),
        },
        tags=['Portfolio Management'],
    )
    def list(self, request, *args, **kwargs):
        return super().list(request, *args, **kwargs)
```

### âœ… 4. ØªØ³Øª Schema Ø¯Ø± Ù…Ø­ÛŒØ· Development

```bash
# 1. Ø¯Ø±ÛŒØ§ÙØª Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Schema
curl http://localhost:8000/api/schema/ | python -m json.tool > schema.json

# 2. Ø¬Ø³ØªØ¬ÙˆÛŒ Permission Classes Ø¯Ø± Schema
cat schema.json | grep -A 5 "security"

# 3. Ø¨Ø±Ø±Ø³ÛŒ Swagger UI Ø¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø±
# http://localhost:8000/api/schema/swagger-ui/

# 4. ØªØ³Øª Ø¨Ø§ HTTPie (Ù†ØµØ¨: pip install httpie)
http GET http://localhost:8000/api/admin/portfolio/ \
  "Cookie:sessionid=YOUR_SESSION_ID"
```

### âœ… 5. ØªØ³Øª Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ ØµÙˆØ±Øª Unit Test

```python
# Backend/src/portfolio/tests/test_permissions.py

from django.test import TestCase
from rest_framework.test import APIClient
from django.contrib.auth import get_user_model

from src.user.models import AdminRole, AdminUserRole

User = get_user_model()


class PortfolioPermissionTests(TestCase):
    """ØªØ³Øª Permission Classes Ø¨Ø±Ø§ÛŒ Portfolio"""
    
    def setUp(self):
        """Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ³Øª"""
        # Ø§ÛŒØ¬Ø§Ø¯ role
        self.portfolio_role = AdminRole.objects.create(
            name='portfolio_manager',
            display_name='Portfolio Manager',
            permissions={
                'modules': ['portfolio'],
                'actions': ['create', 'read', 'update', 'delete']
            }
        )
        
        # Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ
        self.user_with_access = User.objects.create_user(
            email='portfolio@test.com',
            password='test123',
            user_type='admin',
            is_staff=True,
            is_admin_active=True
        )
        AdminUserRole.objects.create(
            user=self.user_with_access,
            role=self.portfolio_role,
            is_active=True
        )
        
        # Ú©Ø§Ø±Ø¨Ø± Ø¨Ø¯ÙˆÙ† Ø¯Ø³ØªØ±Ø³ÛŒ
        self.user_without_access = User.objects.create_user(
            email='noaccess@test.com',
            password='test123',
            user_type='admin',
            is_staff=True,
            is_admin_active=True
        )
        
        self.client = APIClient()
    
    def test_access_with_permission(self):
        """Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ permission Ø¨Ø§ÛŒØ¯ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯"""
        self.client.force_authenticate(user=self.user_with_access)
        response = self.client.get('/api/admin/portfolio/')
        self.assertEqual(response.status_code, 200)
    
    def test_access_without_permission(self):
        """Ú©Ø§Ø±Ø¨Ø± Ø¨Ø¯ÙˆÙ† permission Ù†Ø¨Ø§ÛŒØ¯ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯"""
        self.client.force_authenticate(user=self.user_without_access)
        response = self.client.get('/api/admin/portfolio/')
        self.assertIn(response.status_code, [401, 403])
    
    def test_unauthenticated_access(self):
        """Ú©Ø§Ø±Ø¨Ø± Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ù†Ø´Ø¯Ù‡ Ù†Ø¨Ø§ÛŒØ¯ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯"""
        response = self.client.get('/api/admin/portfolio/')
        self.assertIn(response.status_code, [401, 403])
```

---

## ğŸ”§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ drf-spectacular

```python
# Backend/config/django/base.py

SPECTACULAR_SETTINGS = {
    # Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ù„ÛŒ API
    'TITLE': 'Corporate Admin API',
    'DESCRIPTION': '''
    # Ù…Ø³ØªÙ†Ø¯Ø§Øª API Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª
    
    Ø§ÛŒÙ† API Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø­ØªÙˆØ§ Ùˆ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ† Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª.
    
    ## Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª
    - Session-based authentication (Django sessions)
    - Token-based authentication (optional)
    
    ## Ø¯Ø³ØªØ±Ø³ÛŒâ€ŒÙ‡Ø§
    ØªÙ…Ø§Ù… endpointâ€ŒÙ‡Ø§ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø¯Ø§Ø±Ù†Ø¯. Ù‡Ù…Ú†Ù†ÛŒÙ† Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù‡Ø± Ù…Ø§Ú˜ÙˆÙ„ 
    Ø¨Ø± Ø§Ø³Ø§Ø³ Role Ú©Ø§Ø±Ø¨Ø± Ú©Ù†ØªØ±Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
    ''',
    'VERSION': '1.0.0',
    'SERVE_INCLUDE_SCHEMA': True,
    'COMPONENT_SPLIT_REQUEST': True,
    'SCHEMA_PATH_PREFIX': '/api/',
    
    # Security schemes
    'APPEND_COMPONENTS': {
        'securitySchemes': {
            'cookieAuth': {
                'type': 'apiKey',
                'in': 'cookie',
                'name': 'sessionid',
                'description': 'Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø¨Ø§ Django session cookies'
            },
            'csrfToken': {
                'type': 'apiKey',
                'in': 'header',
                'name': 'X-CSRFToken',
                'description': 'CSRF token Ø¨Ø±Ø§ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ POST/PUT/DELETE'
            }
        }
    },
    
    # Security Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ù‡ endpointâ€ŒÙ‡Ø§
    'SECURITY': [
        {'cookieAuth': [], 'csrfToken': []}
    ],
    
    # ØªÙ†Ø¸ÛŒÙ…Ø§Øª Swagger UI
    'SWAGGER_UI_SETTINGS': {
        'deepLinking': True,
        'persistAuthorization': True,
        'displayOperationId': True,
        'defaultModelsExpandDepth': 2,
        'defaultModelExpandDepth': 2,
        'displayRequestDuration': True,
        'filter': True,
        'showExtensions': True,
        'showCommonExtensions': True,
        'tryItOutEnabled': True,
    },
    
    # ØªÙ†Ø¸ÛŒÙ…Ø§Øª Schema
    'PREPROCESSING_HOOKS': [],
    'POSTPROCESSING_HOOKS': [
        'drf_spectacular.hooks.postprocess_schema_enums',
    ],
    
    # Enum naming
    'ENUM_NAME_OVERRIDES': {},
    
    # Component naming
    'COMPONENT_SPLIT_PATCH': True,
    'COMPONENT_SPLIT_REQUEST': True,
    
    # Sorting
    'SORT_OPERATIONS': True,
    'SORT_OPERATION_PARAMETERS': True,
}
```

---

## ğŸ“Š Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø±ÙˆØ´â€ŒÙ‡Ø§

| Ø±ÙˆØ´ | Ø®ÙˆØ§Ù†Ø§ÛŒÛŒ | Schema Quality | Performance | Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ |
|-----|---------|----------------|-------------|-----------|
| **Instance Ù…Ø³ØªÙ‚ÛŒÙ…** | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ | Production âœ… |
| **Lambda** | â­â­â­ | â­â­â­ | â­â­â­â­â­ | Quick prototyping |
| **Class Ø§Ø®ØªØµØ§ØµÛŒ** | â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­ | Reusable permissions âœ… |
| **extend_schema** | â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ | Complex APIs âœ… |

---

## ğŸ§ª ØªØ³Øª Ùˆ Ø¨Ø±Ø±Ø³ÛŒ

### 1. Ø¨Ø±Ø±Ø³ÛŒ Schema

```bash
# Ø¯Ø±ÛŒØ§ÙØª Schema Ú©Ø§Ù…Ù„
curl http://localhost:8000/api/schema/ | python -m json.tool > api_schema.json

# Ø¨Ø±Ø±Ø³ÛŒ security schemes
cat api_schema.json | jq '.components.securitySchemes'

# Ø¨Ø±Ø±Ø³ÛŒ ÛŒÚ© endpoint Ø®Ø§Øµ
cat api_schema.json | jq '.paths."/api/admin/portfolio/"'

# Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©Ù„Ù…Ø§Øª Ú©Ù„ÛŒØ¯ÛŒ
grep -i "RequireModuleAccess\|permission\|security" api_schema.json
```

### 2. Ø¨Ø±Ø±Ø³ÛŒ Swagger UI

**Ù…Ø±Ø§Ø­Ù„:**
1. Ø¨Ù‡ `http://localhost:8000/api/schema/swagger-ui/` Ø¨Ø±ÙˆÛŒØ¯
2. Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ Ú©Ù‡ "Authorize" button ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯
3. ÛŒÚ© endpoint Ù…Ø«Ù„ `/api/admin/portfolio/` Ø±Ø§ Ø¨Ø§Ø² Ú©Ù†ÛŒØ¯
4. Ø¨Ø§ÛŒØ¯ Ù‚ÙÙ„ ğŸ”’ Ø¯Ø± Ú©Ù†Ø§Ø± endpoint Ø¨Ø¨ÛŒÙ†ÛŒØ¯
5. Ø¯Ø± ØªÙˆØ¶ÛŒØ­Ø§Øª endpointØŒ Ø¨Ø§ÛŒØ¯ requirements Ø¯Ø³ØªØ±Ø³ÛŒ Ø°Ú©Ø± Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯

### 3. ØªØ³Øª Ø¹Ù…Ù„Ú©Ø±Ø¯ Permission

```python
# Backend/src/user/tests/test_permission_integration.py

from django.test import TestCase
from rest_framework.test import APITestCase, APIClient
from django.contrib.auth import get_user_model

User = get_user_model()


class PermissionIntegrationTest(APITestCase):
    """ØªØ³Øª ÛŒÚ©Ù¾Ø§Ø±Ú†Ú¯ÛŒ Permission System Ø¨Ø§ DRF"""
    
    def test_permission_class_detection(self):
        """Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Permission Class Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ ØªØ´Ø®ÛŒØµ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯"""
        from src.portfolio.views.admin.portfolio_views import PortfolioAdminViewSet
        
        viewset = PortfolioAdminViewSet()
        permission_classes = viewset.permission_classes
        
        # Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¬ÙˆØ¯ permission class
        self.assertIsNotNone(permission_classes)
        self.assertTrue(len(permission_classes) > 0)
        
        # Ø¨Ø±Ø±Ø³ÛŒ Ù†ÙˆØ¹ permission
        permission_instance = permission_classes[0]
        if callable(permission_instance):
            permission_instance = permission_instance()
        
        # Ø¨Ø§ÛŒØ¯ RequireModuleAccess Ø¨Ø§Ø´Ø¯
        self.assertTrue(hasattr(permission_instance, 'required_modules'))
    
    def test_schema_generation(self):
        """ØªØ³Øª Ø§ÛŒÙ†Ú©Ù‡ Schema Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ ØªÙˆÙ„ÛŒØ¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯"""
        response = self.client.get('/api/schema/')
        self.assertEqual(response.status_code, 200)
        
        # Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Schema Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª
        schema = response.json()
        self.assertIn('openapi', schema)
        self.assertIn('paths', schema)
        self.assertIn('components', schema)
    
    def test_swagger_ui_loads(self):
        """ØªØ³Øª Ø§ÛŒÙ†Ú©Ù‡ Swagger UI Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ load Ù…ÛŒâ€ŒØ´ÙˆØ¯"""
        response = self.client.get('/api/schema/swagger-ui/')
        self.assertEqual(response.status_code, 200)
        self.assertIn(b'swagger-ui', response.content.lower())
```

**Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øªâ€ŒÙ‡Ø§:**
```bash
# Ø§Ø¬Ø±Ø§ÛŒ Ù‡Ù…Ù‡ ØªØ³Øªâ€ŒÙ‡Ø§
python manage.py test

# ÙÙ‚Ø· ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ permission
python manage.py test src.user.tests.test_permission_integration

# Ø¨Ø§ verbose output
python manage.py test src.user.tests.test_permission_integration -v 2

# Ø¨Ø§ coverage
coverage run --source='.' manage.py test
coverage report
coverage html
```

---

## ğŸ”’ Ù†Ú©Ø§Øª Ø§Ù…Ù†ÛŒØªÛŒ

### âœ… Ú†Ú©â€ŒÙ„ÛŒØ³Øª Ø§Ù…Ù†ÛŒØª Permission System:

- [ ] **Ù‡Ù…ÛŒØ´Ù‡ Ø¨Ø±Ø±Ø³ÛŒ authentication**: Permission Ù‚Ø¨Ù„ Ø§Ø² Ø¨Ø±Ø±Ø³ÛŒ roleØŒ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø±Ø§ Ú†Ú© Ú©Ù†Ø¯
- [ ] **Super admin bypass Ø§Ù…Ù†**: ÙÙ‚Ø· Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù…Ø¹ØªØ¨Ø± super admin Ø¨Ø§Ø´Ù†Ø¯
- [ ] **Cache invalidation**: Ø¨Ø¹Ø¯ Ø§Ø² ØªØºÛŒÛŒØ± roleØŒ cache Ù¾Ø§Ú© Ø´ÙˆØ¯
- [ ] **ØªØ³Øª Ø¯Ø³ØªØ±Ø³ÛŒ**: ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ú©Ø§Ù…Ù„ Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ù‡ Ø³Ù†Ø§Ø±ÛŒÙˆÙ‡Ø§
- [ ] **Logging**: ØªÙ…Ø§Ù… denied accessâ€ŒÙ‡Ø§ log Ø´ÙˆÙ†Ø¯
- [ ] **Rate limiting**: Ù…Ø­Ø¯ÙˆØ¯ÛŒØª ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø±Ø§ÛŒ Ø¬Ù„