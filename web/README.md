# Web Test Client

یک وب ساده برای تست کردن API های بک‌اند Django و پنل ادمین

## نصب

```bash
npm install
```

## تنظیمات

فایل `.env.local` ایجاد کنید:

```env
NEXT_PUBLIC_API_BASE_URL=http://localhost:8000/api
```

## اجرا

```bash
npm run dev
```

سپس به آدرس [http://localhost:3000](http://localhost:3000) بروید

## صفحات

- **خانه (/)** - داشبورد با آمار کلی
- **تیکت‌ها (/tickets)** - فرم ایجاد تیکت جدید (برای کاربران عادی)
- **ایمیل‌ها (/emails)** - فرم تماس (برای کاربران عادی)
- **نمونه کارها (/portfolios)** - لیست نمونه کارها (public endpoint)
- **بلاگ‌ها (/blogs)** - لیست بلاگ‌ها (public endpoint)

**نکته:** این وب برای کاربران عادی است که می‌خواهند تیکت بزنند یا فرم تماس پر کنند. تیکت‌ها و ایمیل‌های ایجاد شده در پنل ادمین قابل مشاهده هستند.

## ساختار API

همه API routes در فولدر `src/api/` قرار دارند:
- `src/api/tickets/route.ts` - API های تیکت
- `src/api/emails/route.ts` - API های ایمیل
- `src/api/portfolios/route.ts` - API های نمونه کار
- `src/api/blogs/route.ts` - API های بلاگ

## تست تیکت

برای تست سیستم تیکت:

1. بک‌اند Django را اجرا کنید (مثلاً روی پورت 8000)
2. این وب را اجرا کنید
3. به صفحه `/tickets` بروید
4. فرم را پر کنید و تیکت ایجاد کنید
5. بعد از ایجاد، لینک مشاهده تیکت نمایش داده می‌شود
6. می‌توانید تیکت را مشاهده کرده و به آن پاسخ دهید

**نکته:** نیازی به ورود یا ثبت‌نام نیست! کاربران با استفاده از `public_id` تیکت می‌توانند تیکت خود را مشاهده کرده و پاسخ دهند.

## نکات

- این وب فقط برای تست است و احراز هویت ندارد
- تمام درخواست‌ها از طریق fetch به بک‌اند ارسال می‌شوند
- در صورت نیاز می‌توانید `.env.local` را برای تغییر آدرس API تغییر دهید

## رفع خطاها

### خطای "relation ticket_ticket does not exist"

اگر در صفحه تیکت‌ها خطای مربوط به دیتابیس می‌بینید، باید migration ها را اجرا کنید:

```bash
cd Backend
python manage.py migrate
```

برای راهنمای کامل، به فایل [MIGRATION_GUIDE.md](./MIGRATION_GUIDE.md) مراجعه کنید.

### خطای 404 برای Portfolios یا Blogs

اگر خطای 404 می‌بینید، مطمئن شوید که:
1. بک‌اند در حال اجرا است (پورت 8000)
2. URL های صحیح استفاده شده‌اند (که در فایل‌های route.ts تنظیم شده‌اند)

### پورت

Next.js به صورت خودکار پورت مناسب را انتخاب می‌کند. اگر پورت 3000 در استفاده است، از پورت 3001 استفاده می‌شود. این رفتار عادی است.
